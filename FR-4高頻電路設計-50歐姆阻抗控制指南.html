<!doctypehtml><html lang="zh-Hant"><meta name="twitter:image"content="https://wellstsai.com/single-page-conclusion/FR-4%E9%AB%98%E9%A0%BB%E9%9B%BB%E8%B7%AF%E8%A8%AD%E8%A8%88-50%E6%AD%90%E5%A7%86%E9%98%BB%E6%8A%97%E6%8E%A7%E5%88%B6%E6%8C%87%E5%8D%97.png"><meta name="twitter:description"content="FR-4 材質 50Ω 高頻電路設計指南。重點說明雙層板如何運用 CPWG 結構實現阻抗控制，並比較多層板的微帶線與帶狀線。內容涵蓋天線整合、佈局策略，以及從模擬到量測的完整驗證流程。"><meta name="twitter:title"content="FR-4高頻電路設計-50歐姆阻抗控制指南"><meta name="twitter:card"content="summary_large_image"><meta property="og:type"content="article"><meta property="og:site_name"content="WellWells"><meta property="og:image"content="https://wellstsai.com/single-page-conclusion/FR-4%E9%AB%98%E9%A0%BB%E9%9B%BB%E8%B7%AF%E8%A8%AD%E8%A8%88-50%E6%AD%90%E5%A7%86%E9%98%BB%E6%8A%97%E6%8E%A7%E5%88%B6%E6%8C%87%E5%8D%97.png"><meta property="og:url"content="https://wellstsai.com/single-page-conclusion/FR-4%E9%AB%98%E9%A0%BB%E9%9B%BB%E8%B7%AF%E8%A8%AD%E8%A8%88-50%E6%AD%90%E5%A7%86%E9%98%BB%E6%8A%97%E6%8E%A7%E5%88%B6%E6%8C%87%E5%8D%97.html"><meta property="og:description"content="FR-4 材質 50Ω 高頻電路設計指南。重點說明雙層板如何運用 CPWG 結構實現阻抗控制，並比較多層板的微帶線與帶狀線。內容涵蓋天線整合、佈局策略，以及從模擬到量測的完整驗證流程。"><meta property="og:title"content="FR-4高頻電路設計-50歐姆阻抗控制指南"><meta name="description"content="FR-4 材質 50Ω 高頻電路設計指南。重點說明雙層板如何運用 CPWG 結構實現阻抗控制，並比較多層板的微帶線與帶狀線。內容涵蓋天線整合、佈局策略，以及從模擬到量測的完整驗證流程。"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>FR-4 高頻電路設計互動指南</title><script src="https://cdn.tailwindcss.com"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><style>body{font-family:Inter,'Noto Sans TC',system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",sans-serif;background-color:#fdfbf8;color:#383838}.slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:#4a90e2;cursor:pointer;border-radius:50%}.slider::-moz-range-thumb{width:20px;height:20px;background:#4a90e2;cursor:pointer;border-radius:50%}.chart-container{position:relative;width:100%;max-width:600px;margin-left:auto;margin-right:auto;height:300px;max-height:400px}@media (min-width:768px){.chart-container{height:350px}}.gradient-text{background-image:linear-gradient(to right,#2563eb,#60a5fa);-webkit-background-clip:text;background-clip:text;color:transparent}.keyword{color:#2563eb;font-weight:600;cursor:pointer;position:relative;white-space:nowrap;transition:transform .2s,color .2s,background-image .2s;padding:2px 6px;border-radius:6px}.keyword:hover{transform:scale(1.05);color:#fff;background-image:linear-gradient(to right,#3b82f6,#2563eb)}.glass-border{border:1px solid transparent;background-clip:padding-box,border-box;background-origin:padding-box,border-box;background-image:linear-gradient(to right,#f3f4f6,#f3f4f6),linear-gradient(135deg,rgba(255,255,255,.4),rgba(255,255,255,.1))}</style><link rel="preconnect"href="https://fonts.googleapis.com"><link rel="preconnect"href="https://fonts.gstatic.com"crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap"rel="stylesheet"><script async src="https://www.googletagmanager.com/gtag/js?id=G-JKC4KZLT26"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JKC4KZLT26")</script><body class="antialiased"><div class="container mx-auto p-4 md:p-8"><header class="text-center mb-12"><h1 class="text-3xl md:text-4xl font-bold text-gray-800">FR-4 高頻電路 50Ω 設計互動指南</h1><p class="mt-2 text-lg text-gray-600">一個基於研究報告的互動工具，旨在探索 2.4/5.8 GHz 頻段下 <span class="keyword"data-keyword="fr4">FR-4</span> 材質的傳輸線與天線設計方法</header><main><section id="overview"class="content-section mb-12"><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-2xl font-bold mb-4 text-gray-700">核心挑戰與目標</h2><p class="text-gray-600 leading-relaxed">本研究旨在建立一套在標準 <span class="keyword"data-keyword="fr4">FR-4</span> 材質上，於 2.4 GHz 與 5.8 GHz 頻段實現可量產 50Ω <span class="keyword"data-keyword="impedance">阻抗控制</span>的方法論。主要挑戰在於如何在不同電路板層數（特別是成本敏感的雙層板）下，找到兼顧電氣性能與可製造性 (DFM) 的幾何參數。此互動指南將帶您探索這些關鍵設計決策。</div><div class="grid md:grid-cols-2 gap-6"><div class="bg-red-50 border border-red-200 rounded-lg shadow p-6"><h3 class="text-xl font-bold text-red-800 mb-3">問題：雙層板的傳統<span class="keyword"data-keyword="microstrip">微帶線</span>困境</h3><p class="text-red-700 mb-4">在典型的雙層板（介質厚度 H ≈ 1.0mm-1.6mm）上，若以頂層走線、底層為參考地來實現 50Ω <span class="keyword"data-keyword="microstrip">微帶線</span>，會因介質太厚導致所需線寬 (W) 過大（例如 > 70 mil / 1.7mm）。這不僅佔用寶貴的佈線空間，也難以與常規的 SMD 元件接合，在實務上幾乎不可行。<div class="w-full bg-gray-200 rounded p-2 mt-4"><div class="text-center text-sm font-semibold mb-2">示意圖：過寬的微帶線</div><div class="bg-green-600 mx-auto"style="height:6px;width:35%"></div><div class="bg-yellow-500 w-full"style="height:30px"></div><div class="bg-green-600 w-full"style="height:6px"></div><div class="text-center text-xs text-gray-500 mt-1">頂層銅 (W > 70 mil) / FR-4 (H ≈ 40 mil) / 底層地</div></div></div><div class="bg-green-50 border border-green-200 rounded-lg shadow p-6"><h3 class="text-xl font-bold text-green-800 mb-3">解決方案：<span class="keyword"data-keyword="cpwg">帶狀共面波導 (CPWG)</span></h3><p class="text-green-700 mb-4">為解決此問題，雙層板設計引入了<span class="keyword"data-keyword="cpwg">帶狀共面波導</span> (Coplanar Waveguide with Ground, CPWG)。透過在信號線同層兩側鋪設接地銅皮，並控制信號線到接地銅的間隙 (S)，可以有效降低特性阻抗。這使得我們能在合理的線寬 (W ≈ 20-40 mil) 下實現 50Ω，具備高度的可行性與可製造性。<div class="w-full bg-gray-200 rounded p-2 mt-4"><div class="text-center text-sm font-semibold mb-2">示意圖：可行的 CPWG 結構</div><div class="flex justify-center items-center"><div class="bg-green-600 flex-grow"style="height:6px"></div><div class="w-2 md:w-4"></div><div class="bg-yellow-600"style="height:6px;width:15%"></div><div class="w-2 md:w-4"></div><div class="bg-green-600 flex-grow"style="height:6px"></div></div><div class="bg-yellow-500 w-full"style="height:30px"></div><div class="bg-green-600 w-full"style="height:6px"></div><div class="text-center text-xs text-gray-500 mt-1">側邊地 / 間隙 S / 信號線 W / 間隙 S / 側邊地</div></div></div></div></section><section id="two-layer"class="content-section mb-12"><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-2xl font-bold mb-4 text-gray-700">雙層板 <span class="keyword"data-keyword="cpwg">CPWG</span> 設計參數探索</h2><p class="text-gray-600 leading-relaxed">此工具模擬了在雙層 <span class="keyword"data-keyword="fr4">FR-4</span> 板上，<span class="keyword"data-keyword="cpwg">CPWG</span> 結構的關鍵幾何參數如何影響最終的<span class="keyword"data-keyword="impedance">特性阻抗 (Z<sub>0</sub>)</span>。請調整下方的滑桿，觀察阻抗值的即時變化。目標是將阻抗控制在 50Ω 的目標範圍內 (45Ω - 55Ω)。這有助於建立對參數敏感度的直觀理解。</div><div class="grid lg:grid-cols-2 gap-8"><div class="space-y-6"><div><label for="trace-width"class="flex justify-between font-medium text-gray-700"><span>線寬 (W)</span><span id="trace-width-val">30 mil</span></label> <input type="range"id="trace-width"min="5"max="80"value="30"class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"></div><div><label for="gap"class="flex justify-between font-medium text-gray-700"><span>接地間隙 (S)</span><span id="gap-val">7 mil</span></label> <input type="range"id="gap"min="4"max="50"value="7"class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"></div><div><label for="height"class="flex justify-between font-medium text-gray-700"><span>介質厚度 (H)</span><span id="height-val">39.6 mil</span></label> <input type="range"id="height"min="20"max="63"value="39.6"step="0.1"class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"></div><div><label for="er"class="flex justify-between font-medium text-gray-700"><span><span class="keyword"data-keyword="er">介電常數 (ε<sub>r</sub>)</span></span><span id="er-val">4.2</span></label> <input type="range"id="er"min="3.8"max="4.6"value="4.2"step="0.1"class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"></div><div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400 text-blue-800 rounded-r-lg"><p class="font-semibold">設計提示<p class="text-sm leading-relaxed">要達到 50Ω，通常需要平衡各項參數。一般來說：<br>• <b>提高阻抗</b>：增加間隙(S)、增加厚度(H)、減小線寬(W)、減小<span class="keyword"data-keyword="er">介電常數(ε<sub>r</sub>)</span>。<br>• <b>降低阻抗</b>：減小間隙(S)、減小厚度(H)、增加線寬(W)、增加<span class="keyword"data-keyword="er">介電常數(ε<sub>r</sub>)</span>。</div></div><div><div class="chart-container"><canvas id="impedanceChart"></canvas></div><div id="impedance-status"class="text-center mt-4 p-4 rounded-lg font-bold text-xl"></div></div></div></section><section id="multi-layer"class="content-section mb-12"><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-2xl font-bold mb-4 text-gray-700">多層板設計：<span class="keyword"data-keyword="microstrip">微帶線</span> vs. <span class="keyword"data-keyword="stripline">帶狀線</span></h2><p class="text-gray-600 leading-relaxed">在多層板中，阻抗控制變得更為直接。外層走線通常使用<span class="keyword"data-keyword="microstrip">微帶線 (Microstrip)</span>，而內層走線則被上下參考地平面包裹，形成<span class="keyword"data-keyword="stripline">帶狀線 (Stripline)</span>。由於介質厚度 (H) 可以做得很薄（例如 70-100 µm），因此可以在很窄的線寬下實現 50Ω。請選擇層疊配置，比較不同結構下的典型線寬。</div><div class="text-center mb-6"><button id="btn-6layer"class="bg-blue-500 text-white px-6 py-2 rounded-md shadow hover:bg-blue-600 transition">6層板範例</button> <button id="btn-8layer"class="bg-gray-300 text-gray-800 px-6 py-2 rounded-md hover:bg-gray-400 transition ml-4">8層板範例</button></div><div class="grid md:grid-cols-2 gap-8 items-start"><div><h3 id="stackup-title"class="text-xl font-bold text-center mb-4">6層板典型層疊</h3><div id="stackup-diagram"class="bg-gray-100 p-4 rounded-lg border"></div></div><div class="chart-container h-96"><canvas id="multiLayerChart"></canvas></div></div></section><section id="antenna"class="content-section mb-12"><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-2xl font-bold mb-4 text-gray-700">天線整合與鋪地策略</h2><p class="text-gray-600 leading-relaxed">天線的性能不僅取決於天線本身，更與其在 PCB 上的佈局、饋線設計及周圍的接地環境息息相關。常見的方案有 PCB 直接成型的<span class="keyword"data-keyword="ifa">倒 F 天線 (IFA)</span> 和使用現成的<span class="keyword"data-keyword="ceramic">陶瓷天線</span>。兩者在效率、方向性、設計複雜度和成本上各有取捨。</div><div class="grid md:grid-cols-2 gap-8"><div class="bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-bold mb-4 text-center">天線區淨空 (Keep-out) 原則</h3><p class="text-gray-600 mb-4">無論使用何種天線，其周圍必須保留一塊完整的「淨空區」，禁止佈線和鋪設任何銅皮（包括頂層和所有內層）。這能確保天線的輻射模式不受干擾，維持良好的效率和匹配。饋線本身則通常需要完整的參考地以維持 50Ω。<div class="w-full bg-gray-100 border rounded-lg p-4 flex"><div class="w-2/3 border-r pr-4"><p class="font-semibold text-center text-sm">主電路區<div class="bg-green-100 h-24 mt-2 flex items-center justify-center text-green-900 font-bold text-sm">GND Plane</div></div><div class="w-1/3 pl-4"><p class="font-semibold text-center text-sm text-red-600">天線淨空區<div class="bg-red-100 h-24 mt-2 flex items-center justify-center text-red-900 font-bold text-sm">NO GND</div></div></div></div><div class="bg-white p-6 rounded-lg shadow"><h3 class="text-xl font-bold mb-4 text-center">方案比較：PCB 天線 vs. 陶瓷天線</h3><div class="flex border rounded-lg overflow-hidden"><button id="btn-ifa"class="flex-1 p-3 text-center font-semibold bg-blue-100 border-r">倒 F 天線 (IFA)</button> <button id="btn-ceramic"class="flex-1 p-3 text-center font-semibold bg-white">陶瓷天線</button></div><div id="antenna-details"class="mt-4"></div></div></div></section><section id="validation"class="content-section"><div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-2xl font-bold mb-4 text-gray-700">設計、製造到驗證的閉環流程</h2><p class="text-gray-600 leading-relaxed">一個成功的 RF 設計需要理論計算、模擬、精密製造與實際量測的緊密結合。從概念到量產，整個流程是一個不斷迭代和修正的閉環。以下是典型的設計驗證流程，點擊每個步驟以了解其關鍵任務。</div><div id="process-flow"class="flex flex-col md:flex-row justify-around items-center space-y-4 md:space-y-0 md:space-x-4"></div><div id="process-details"class="mt-8 bg-blue-50 p-6 rounded-lg border-l-4 border-blue-500 min-h-[100px]"></div></section></main><footer class="bg-gray-100 text-center p-6 mt-16 rounded-lg"><p class="text-sm text-gray-600"><a href="https://wellstsai.com"target="_blank"rel="noopener noreferrer"class="hover:text-blue-600 transition-colors">Generated by wellstsai.com</a><p class="text-xs text-gray-400 mt-2">撰寫日期：2025年9月19日</footer></div><div id="keyword-modal"class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden"aria-hidden="true"role="dialog"aria-modal="true"><div id="modal-backdrop"class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity duration-300 ease-in-out opacity-0"></div><div id="modal-panel"class="relative bg-gray-100/80 backdrop-blur-xl rounded-2xl shadow-2xl w-full max-w-2xl text-gray-800 glass-border transition-all duration-300 ease-in-out opacity-0 scale-95"><div class="p-6 md:p-8"><div class="flex justify-between items-center pb-4 border-b border-gray-500/20"><h3 id="modal-title"class="text-2xl font-bold gradient-text"></h3><button id="modal-close-button"aria-label="關閉"class="text-gray-500 hover:text-gray-900 transition-colors"><svg class="w-6 h-6"fill="none"stroke="currentColor"viewBox="0 0 24 24"><path stroke-linecap="round"stroke-linejoin="round"stroke-width="2"d="M6 18L18 6M6 6l12 12"/></svg></button></div><div id="modal-content"class="mt-4 text-gray-600 leading-relaxed space-y-4"></div></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("impedanceChart"),t=document.getElementById("multiLayerChart");let a,n;const r={w:30,s:7,h:39.6,er:4.2},i={active:"6layer","6layer":{labels:["外層微帶線","內層帶狀線"],widths:[15,8],stackup:[{type:"Signal (Microstrip)",material:"L1: Copper",color:"bg-yellow-600"},{type:"Dielectric",material:"FR-4 (H=6mil)",color:"bg-green-500"},{type:"Plane",material:"L2: Ground",color:"bg-green-700"},{type:"Core",material:"FR-4 Core",color:"bg-green-600"},{type:"Signal (Stripline)",material:"L3: Signal",color:"bg-yellow-600"},{type:"Dielectric",material:"FR-4 (H=4mil)",color:"bg-green-500"},{type:"Plane",material:"L4: Power",color:"bg-red-700"},{type:"Core",material:"FR-4 Core",color:"bg-green-600"},{type:"Plane",material:"L5: Ground",color:"bg-green-700"},{type:"Dielectric",material:"FR-4 (H=6mil)",color:"bg-green-500"},{type:"Signal (Microstrip)",material:"L6: Signal",color:"bg-yellow-600"}]},"8layer":{labels:["外層微帶線","內層帶狀線"],widths:[12,6],stackup:[{type:"Signal",material:"L1",color:"bg-yellow-600"},{type:"Dielectric",material:"H=5mil",color:"bg-green-500"},{type:"Plane",material:"L2 (GND)",color:"bg-green-700"},{type:"Core",material:"Core",color:"bg-green-600"},{type:"Signal",material:"L3 (Stripline)",color:"bg-yellow-600"},{type:"Dielectric",material:"H=4mil",color:"bg-green-500"},{type:"Plane",material:"L4 (GND)",color:"bg-green-700"},{type:"Core",material:"Core",color:"bg-green-600"},{type:"Plane",material:"L5 (PWR)",color:"bg-red-700"},{type:"Dielectric",material:"H=4mil",color:"bg-green-500"},{type:"Signal",material:"L6 (Stripline)",color:"bg-yellow-600"},{type:"Core",material:"Core",color:"bg-green-600"},{type:"Plane",material:"L7 (GND)",color:"bg-green-700"},{type:"Dielectric",material:"H=5mil",color:"bg-green-500"},{type:"Signal",material:"L8",color:"bg-yellow-600"}]}},o={active:"ifa",ifa:{title:"倒 F 天線 (Inverted-F Antenna, IFA)",points:["<strong>優點：</strong>成本極低（直接在PCB上蝕刻成型），易於整合。","<strong>優點：</strong>在有足夠淨空區時，通常有較高的輻射效率。","<strong>缺點：</strong>佔用較大的PCB面積。","<strong>缺點：</strong>設計需要專業RF知識與模擬，對地平面尺寸和形狀敏感。"]},ceramic:{title:"陶瓷天線 (Ceramic Antenna)",points:["<strong>優點：</strong>體積非常小，節省PCB空間。","<strong>優點：</strong>為標準化元件，電氣特性較可預測。","<strong>缺點：</strong>成本相對較高，需要焊接。",'<strong>缺點：</strong>對周圍環境極度敏感，通常需要額外的<span class="keyword" data-keyword="matching">匹配網路</span>進行調諧才能達到最佳性能。']}},l={active:0,steps:[{name:"設計與模擬",icon:"💻"},{name:"原型製作",icon:"🏭"},{name:"量測驗證",icon:"📡"},{name:"調諧與優化",icon:"🔧"},{name:"量產導入",icon:"📈"}],details:['使用 Polar SI9000、ADS LineCalc 等專業工具，根據板廠提供的層疊參數（介質厚度、ε<sub>r</sub>、銅厚）進行初始線寬計算。同時使用 Ansys HFSS 等 3D 電磁模擬軟體對傳輸線和天線性能進行模擬，預測 <span class="keyword" data-keyword="s11"><i>S</i><sub>11</sub></span>、方向圖等指標。',"製作少量 PCB 原型用於工程驗證 (EVT)。此階段需確保製造公差在控制範圍內，特別是阻抗相關的線寬、間隙與介質厚度。選擇合適的板邊連接器（如 SMA）以便進行精確量測。",'使用<span class="keyword" data-keyword="tdr">時域反射儀 (TDR)</span>檢查阻抗的連續性，定位潛在的斷點或不匹配點。使用<span class="keyword" data-keyword="vna">向量網路分析儀 (VNA)</span>精確量測 <span class="keyword" data-keyword="sparam"><i>S</i> 參數</span>，特別是 <span class="keyword" data-keyword="s11"><i>S</i><sub>11</sub></span>（反射損失），以評估匹配的好壞。此步驟需要進行校準 (SOLT/TRL) 與<span class="keyword" data-keyword="debed">去嵌 (de-embedding)</span>以消除治具和接頭的影響。','根據 <span class="keyword" data-keyword="vna">VNA</span> 的量測結果，微調設計參數。對於天線，可能需要在饋點處增加一個由電感和電容組成的 L-C <span class="keyword" data-keyword="matching">匹配網路</span>，將天線的實際阻抗匹配到 50Ω。這是一個需要反覆量測和調整的過程。','在設計驗證測試 (DVT) 和生產驗證測試 (PVT) 階段，監控量產板卡的阻抗一致性。制定阻抗測試規範（如使用阻抗試片 <span class="keyword" data-keyword="tdr">TDR</span> 測試），確保大規模生產下的產品性能符合設計要求。']};function s(){if(!a)return;const e=function(e,t,a,n){const r=e/(e+2*t),i=Math.sqrt(1-r*r);let o;o=r<=1/Math.sqrt(2)?Math.PI/Math.log(2*(1+Math.sqrt(i))/(1-Math.sqrt(i))):1/Math.PI*Math.log(2*(1+Math.sqrt(r))/(1-Math.sqrt(r)));const l=(n+1)/2;return 188.365*o/Math.sqrt(l)}(r.w,r.s,r.h,r.er);a.data.datasets[0].data[0]=e;const t=document.getElementById("impedance-status");e>=45&&e<=55?(t.innerHTML=`Z<sub>0</sub> ≈ ${e.toFixed(1)} Ω (目標範圍內)`,t.className="text-center mt-4 p-4 rounded-lg font-bold text-xl bg-green-100 text-green-800",a.data.datasets[0].backgroundColor="rgba(74, 222, 128, 0.6)",a.data.datasets[0].borderColor="rgba(34, 197, 94, 1)"):e<45?(t.innerHTML=`Z<sub>0</sub> ≈ ${e.toFixed(1)} Ω (過低)`,t.className="text-center mt-4 p-4 rounded-lg font-bold text-xl bg-yellow-100 text-yellow-800",a.data.datasets[0].backgroundColor="rgba(250, 204, 21, 0.6)",a.data.datasets[0].borderColor="rgba(234, 179, 8, 1)"):(t.innerHTML=`Z<sub>0</sub> ≈ ${e.toFixed(1)} Ω (過高)`,t.className="text-center mt-4 p-4 rounded-lg font-bold text-xl bg-red-100 text-red-800",a.data.datasets[0].backgroundColor="rgba(252, 165, 165, 0.6)",a.data.datasets[0].borderColor="rgba(239, 68, 68, 1)"),a.update()}function d(){if(!n)return;const e=i[i.active];n.data.labels=e.labels,n.data.datasets[0].data=e.widths,n.update(),function(){const e=document.getElementById("stackup-diagram"),t=i[i.active].stackup;e.innerHTML=t.map(e=>`<div class="${e.color} text-white text-xs font-mono p-1 text-center">${e.material}</div>`).join(""),document.getElementById("stackup-title").textContent=("6layer"===i.active?"6層板":"8層板")+"典型層疊"}()}[{id:"trace-width",prop:"w",unit:" mil",decimals:0},{id:"gap",prop:"s",unit:" mil",decimals:0},{id:"height",prop:"h",unit:" mil",decimals:1},{id:"er",prop:"er",unit:"",decimals:1}].forEach(e=>{const t=document.getElementById(e.id),a=document.getElementById(`${e.id}-val`);t.addEventListener("input",()=>{const n=parseFloat(t.value);r[e.prop]=n,a.textContent=`${n.toFixed(e.decimals)}${e.unit}`,s()})});const c=document.getElementById("btn-6layer"),g=document.getElementById("btn-8layer");function m(){const e=document.getElementById("antenna-details"),t=o[o.active];e.innerHTML=`<h4 class="font-bold text-lg mb-2">${t.title}</h4><ul class="list-disc list-inside space-y-2 text-gray-700">${t.points.map(e=>`<li>${e}</li>`).join("")}</ul>`,document.getElementById("btn-ifa").classList.toggle("bg-blue-100","ifa"===o.active),document.getElementById("btn-ifa").classList.toggle("bg-white","ifa"!==o.active),document.getElementById("btn-ceramic").classList.toggle("bg-blue-100","ceramic"===o.active),document.getElementById("btn-ceramic").classList.toggle("bg-white","ceramic"!==o.active)}c.addEventListener("click",()=>{i.active="6layer",c.classList.replace("bg-gray-300","bg-blue-500"),c.classList.add("text-white"),g.classList.replace("bg-blue-500","bg-gray-300"),g.classList.remove("text-white"),d()}),g.addEventListener("click",()=>{i.active="8layer",g.classList.replace("bg-gray-300","bg-blue-500"),g.classList.add("text-white"),c.classList.replace("bg-blue-500","bg-gray-300"),c.classList.remove("text-white"),d()}),document.getElementById("btn-ifa").addEventListener("click",()=>{o.active="ifa",m()}),document.getElementById("btn-ceramic").addEventListener("click",()=>{o.active="ceramic",m()}),function(){const t=e.getContext("2d");a=new Chart(t,{type:"bar",data:{labels:["特性阻抗 (Z₀)"],datasets:[{label:"Calculated Impedance (Ω)",data:[52],backgroundColor:"rgba(74, 222, 128, 0.6)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,borderRadius:5,barPercentage:.5}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1,min:20,max:120,title:{display:!0,text:"阻抗 (Ω)"}},x:{grid:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}}),s()}(),function(){const e=t.getContext("2d");n=new Chart(e,{type:"bar",data:{labels:[],datasets:[{label:"典型50Ω線寬 (mil)",data:[],backgroundColor:["rgba(59, 130, 246, 0.6)","rgba(249, 115, 22, 0.6)"],borderColor:["rgba(37, 99, 235, 1)","rgba(234, 88, 12, 1)"],borderWidth:2,borderRadius:5}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{beginAtZero:!0,title:{display:!0,text:"線寬 (mil)"}}},plugins:{legend:{display:!1}}}}),d()}(),m(),function e(){const t=document.getElementById("process-flow"),a=document.getElementById("process-details");t.innerHTML=l.steps.map((e,t)=>`<div class="flex items-center"><button data-index="${t}" class="process-step flex flex-col items-center cursor-pointer p-2 rounded-lg transition ${l.active===t?"bg-blue-200":""}"><span class="text-3xl">${e.icon}</span><span class="mt-2 text-sm font-semibold">${e.name}</span></button>${t<l.steps.length-1?'<div class="hidden md:block text-gray-400 text-2xl mx-4">→</div>':""}</div>`).join(""),a.innerHTML=`<p>${l.details[l.active]}</p>`,document.querySelectorAll(".process-step").forEach(t=>{t.addEventListener("click",()=>{l.active=parseInt(t.dataset.index),e()})})}()}),(()=>{const e={fr4:{title:"FR-4",content:"<p>Flame Retardant 4 的縮寫，是一種由環氧樹脂和玻璃纖維布組成的複合材料。它是目前業界最廣泛使用、成本最低廉的印刷電路板 (PCB) 基材。其電氣特性在高頻應用中雖非最佳，但因其成熟的製程與低成本，在 2.4/5.8 GHz 等主流頻段仍是首選。</p>"},impedance:{title:"特性阻抗 (Characteristic Impedance, Z₀)",content:"<p>指高頻信號在傳輸線中傳播時所遇到的瞬間電阻。為確保信號能最大效率地從發射端傳輸到接收端（例如從晶片傳到天線），傳輸線的特性阻抗必須與源頭和負載的阻抗相匹配，通常標準為 50Ω。阻抗不匹配會導致信號反射、能量損失和訊號失真。</p>"},microstrip:{title:"微帶線 (Microstrip)",content:"<p>一種常見的傳輸線結構，由一條位於電介質基板頂層的導體帶，和其下方的一個連續金屬接地平面所組成。信號主要在導體和接地平面之間傳播。其結構簡單，常用於 PCB 的外層信號走線。</p>"},cpwg:{title:"帶狀共面波導 (Coplanar Waveguide with Ground, CPWG)",content:"<p>一種特殊的傳輸線結構，信號導體與其兩側的接地銅皮位於同一平面上，並且在底層還有一層完整的接地平面。這種結構能將電磁場更有效地束縛在信號線周圍，因此即便在較厚的電介質（如雙層板）上，也能用合理的線寬實現 50Ω 阻抗控制。</p>"},stripline:{title:"帶狀線 (Stripline)",content:"<p>一種將信號導體完全嵌入在兩個平行接地平面之間的傳輸線結構。由於電磁場被完全包裹在上下接地層之間，因此輻射洩漏極小，抗干擾能力強。常用於多層板的內層高頻信號走線。</p>"},er:{title:"介電常數 (Dielectric Constant, εr)",content:"<p>也稱為相對電容率，是衡量電介質材料儲存電能能力的物理量。它直接影響電磁波在介質中傳播的速度和傳輸線的特性阻抗。FR-4 的 ε<sub>r</sub> 值通常在 3.8 到 4.6 之間，並且會隨頻率升高而略有下降。</p>"},ifa:{title:"倒 F 型天線 (Inverted-F Antenna, IFA)",content:'<p>一種非常流行的 PCB 天線形式，因其形狀像倒置的字母 "F" 而得名。它結構緊湊、易於製造（直接在 PCB 上蝕刻），並且可以透過調整尺寸來匹配 50Ω 阻抗。廣泛應用於手機、Wi-Fi 模組等無線通訊設備中。</p>'},ceramic:{title:"陶瓷天線 (Ceramic Antenna)",content:"<p>使用高介電常數的陶瓷材料作為基板製成的小型化天線。其主要優點是體積非常小，可以作為一個標準的表面貼裝元件 (SMD) 直接焊接到 PCB 上，節省大量空間。但其性能對周圍環境極度敏感，通常需要額外的匹配電路進行調諧。</p>"},sparam:{title:"S 參數 (Scattering Parameters)",content:"<p>在高頻領域中，用來描述線性電路網路電氣行為的一組參數。它描述了信號在網路各個端口（Port）之間如何反射和傳輸。例如，一個雙端口網路（如傳輸線）有四個 S 參數：<i>S</i><sub>11</sub>, <i>S</i><sub>21</sub>, <i>S</i><sub>12</sub>, <i>S</i><sub>22</sub>。</p>"},s11:{title:"S₁₁ (反射損失 / Return Loss)",content:"<p><i>S</i> 參數之一，表示從端口 1 輸入的信號有多少被反射回端口 1。這個值通常以分貝 (dB) 表示，其絕對值越大，表示反射回來的能量越少，即阻抗匹配得越好。一個理想的 50Ω 系統，其 <i>S</i><sub>11</sub> 應趨近於負無窮大（例如 < -10 dB）。</p>"},tdr:{title:"時域反射儀 (Time-Domain Reflectometer)",content:"<p>一種量測儀器，透過發射一個快速的脈衝信號到傳輸線中，並分析反射回來的信號波形，來檢查傳輸線的阻抗是否連續。它可以精確地定位出阻抗不匹配發生的物理位置，例如 PCB 走線的瑕疵、連接器焊接不良等。</p>"},vna:{title:"向量網路分析儀 (Vector Network Analyzer)",content:"<p>一種功能強大的高頻量測儀器，可以精確測量電路網路的 S 參數。它不僅能測量信號的幅度，還能測量相位，從而完整地描述一個元件或電路在高頻下的所有特性。是 RF 工程師進行設計驗證和調試必不可少的工具。</p>"},matching:{title:"匹配網路 (Matching Network)",content:"<p>由電感 (L) 和電容 (C) 等被動元件組成的電路，用於將一個電路的輸出阻抗轉換為另一個電路的輸入阻抗，以實現阻抗匹配。例如，將一個實際阻抗為 70+j30Ω 的天線，透過匹配網路轉換為標準的 50Ω，以對接到發射晶片。</p>"},debed:{title:"去嵌 (De-embedding)",content:"<p>一種在 RF 量測中的數學處理技術。由於量測時必須使用測試治具、探針或連接線，這些額外部件本身的電氣特性會影響到對待測物 (DUT) 的真實性能量測。去嵌技術可以透過數學運算，將這些測試治具的影響從總量測結果中「剝離」或「嵌入」出去，從而得到待測物本身更精確的 S 參數。</p>"}},t=document.getElementById("keyword-modal"),a=document.getElementById("modal-backdrop"),n=document.getElementById("modal-panel"),r=document.getElementById("modal-title"),i=document.getElementById("modal-content"),o=(document.getElementById("modal-close-button"),()=>{document.body.style.overflow="",a.classList.add("opacity-0"),n.classList.add("opacity-0","scale-95"),t.setAttribute("aria-hidden","true");const e=()=>{t.classList.add("hidden"),n.removeEventListener("transitionend",e)};n.addEventListener("transitionend",e)});document.addEventListener("click",l=>{const s=l.target.closest(".keyword");if(s&&s.dataset.keyword)return(o=>{const l=e[o];l&&(r.textContent=l.title,i.innerHTML=l.content,document.body.style.overflow="hidden",t.classList.remove("hidden"),t.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>{a.classList.remove("opacity-0"),n.classList.remove("opacity-0","scale-95")}))})(s.dataset.keyword);const d=l.target.closest("#modal-close-button");(l.target===a||d)&&o()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&"false"===t.getAttribute("aria-hidden")&&o()})})()</script>