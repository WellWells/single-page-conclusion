<!doctypehtml><html lang="zh-Hant"style="scroll-behavior:smooth"><meta name="twitter:image"content="https://wellstsai.com/single-page-conclusion/PyArmor%E6%95%99%E5%AD%B8-%E5%8A%A0%E5%AF%86%E4%BF%9D%E8%AD%B7.%E6%8E%88%E6%AC%8A%E5%95%9F%E7%94%A8%E8%88%87%E9%83%A8%E7%BD%B2%E7%96%91%E9%9B%A3%E6%8E%92%E8%A7%A3.png"><meta name="twitter:description"content="PyArmor 教學，提供 Python 程式碼加密與保護方案。介紹安裝、指令使用與專業版授權，並解決跨平台加密、找不到擴充模組及部署時等常見錯誤。"><meta name="twitter:title"content="PyArmor 教學：加密保護、授權啟用與部署疑難排解"><meta name="twitter:card"content="summary_large_image"><meta property="og:type"content="article"><meta property="og:site_name"content="WellWells"><meta property="og:image"content="https://wellstsai.com/single-page-conclusion/PyArmor%E6%95%99%E5%AD%B8-%E5%8A%A0%E5%AF%86%E4%BF%9D%E8%AD%B7.%E6%8E%88%E6%AC%8A%E5%95%9F%E7%94%A8%E8%88%87%E9%83%A8%E7%BD%B2%E7%96%91%E9%9B%A3%E6%8E%92%E8%A7%A3.png"><meta property="og:url"content="https://wellstsai.com/single-page-conclusion/PyArmor%E6%95%99%E5%AD%B8-%E5%8A%A0%E5%AF%86%E4%BF%9D%E8%AD%B7.%E6%8E%88%E6%AC%8A%E5%95%9F%E7%94%A8%E8%88%87%E9%83%A8%E7%BD%B2%E7%96%91%E9%9B%A3%E6%8E%92%E8%A7%A3.html"><meta property="og:description"content="PyArmor 教學，提供 Python 程式碼加密與保護方案。介紹安裝、指令使用與專業版授權，並解決跨平台加密、找不到擴充模組及部署時等常見錯誤。"><meta property="og:title"content="PyArmor 教學：加密保護、授權啟用與部署疑難排解"><meta name="description"content="PyArmor 教學，提供 Python 程式碼加密與保護方案。介紹安裝、指令使用與專業版授權，並解決跨平台加密、找不到擴充模組及部署時等常見錯誤。"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>PyArmor 教學：加密保護、授權啟用與部署疑難排解</title><script src="https://cdn.tailwindcss.com"></script><style>body{font-family:Inter,sans-serif}.code-block{position:relative}.copy-button{position:absolute;top:.5rem;right:.5rem;padding:.25rem .5rem;border-radius:.375rem;font-size:.75rem;cursor:pointer;transition:all .2s}.copy-button:hover{background-color:#4a5568}.nav-link.active{color:#0891b2;font-weight:600}.desktop-nav-link.active{border-bottom:2px solid #0891b2}.mobile-nav-link.active{background-color:#e6f7ff}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JKC4KZLT26"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JKC4KZLT26")</script><body class="bg-slate-50 text-slate-800"><header class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur-sm border-b border-slate-200"><nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16"><div class="flex items-center"><a href="#overview"class="text-xl font-bold text-cyan-800">PyArmor 指南</a></div><div class="hidden md:block"><ul class="flex items-baseline space-x-4"><li><a href="#overview"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">核心概念</a><li><a href="#comparison"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">混淆 vs. 編譯</a><li><a href="#quick-start"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">基本使用方法</a><li><a href="#pro-license"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">專業版授權</a><li><a href="#troubleshooting"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">疑難排解</a><li><a href="#deployment-issues"class="nav-link desktop-nav-link text-slate-600 hover:text-cyan-700 px-3 py-2 rounded-md text-sm font-medium transition-colors">部署問題</a></ul></div><div class="md:hidden"><button id="mobile-menu-button"type="button"class="inline-flex items-center justify-center p-2 rounded-md text-slate-400 hover:text-slate-500 hover:bg-slate-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-cyan-500"aria-controls="mobile-menu"aria-expanded="false"><span class="sr-only">Open main menu</span><div class="space-y-1.5"><span class="block w-6 h-0.5 bg-slate-500"></span> <span class="block w-6 h-0.5 bg-slate-500"></span> <span class="block w-6 h-0.5 bg-slate-500"></span></div></button></div></div></nav><div id="mobile-menu"class="md:hidden hidden"><ul class="px-2 pt-2 pb-3 space-y-1 sm:px-3"><li><a href="#overview"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">核心概念</a><li><a href="#comparison"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">混淆 vs. 編譯</a><li><a href="#quick-start"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">基本使用方法</a><li><a href="#pro-license"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">專業版授權</a><li><a href="#troubleshooting"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">疑難排解</a><li><a href="#deployment-issues"class="nav-link mobile-nav-link text-slate-600 hover:bg-slate-100 block px-3 py-2 rounded-md text-base font-medium">部署問題</a></ul></div></header><main class="p-4 md:p-8 lg:p-12"><div class="max-w-4xl mx-auto"><section id="overview"class="content-section space-y-6 pt-16 -mt-16 mb-12"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">核心概念：什麼是 PyArmor？</h2><p class="text-lg text-slate-600">PyArmor 是一個專門用來「混淆」（Obfuscate）Python 程式碼的第三方函式庫和命令列工具。混淆的目的是讓原始程式碼變得極難閱讀和理解，從而保護您的商業邏輯與智慧財產權。值得注意的是，Python 是一種「直譯式語言」，其混淆技術主要是增加破解的門檻，其安全性無法與 C++ 這類「編譯式語言」相比。<div class="p-4 border-l-4 border-yellow-400 bg-yellow-50 rounded-r-lg"><h4 class="font-bold text-yellow-800">重要安全觀念提醒</h4><p class="text-yellow-700 mt-1"><strong>絕對不要在程式碼中儲存明文密碼！</strong> 即使是混淆過的檔案，有心人士依然可能找到寫死的字串。請將敏感資訊儲存在環境變數或金鑰管理服務中。PyArmor 只是提高破解門檻，並非萬無一失的安全解方。</div><h3 class="text-2xl font-semibold pt-4">主要功能與特色</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><h4 class="text-lg font-bold text-cyan-800">🛡️ 程式碼混淆</h4><p class="text-slate-600 mt-2">將 `.py` 檔案轉換為人類難以閱讀的格式，隱藏原始變數、函式名稱和字串。</div><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><h4 class="text-lg font-bold text-cyan-800">📅 設定有效期限</h4><p class="text-slate-600 mt-2">可為程式設定到期日，適合發布試用版軟體。</div><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><h4 class="text-lg font-bold text-cyan-800">💻 硬體綁定</h4><p class="text-slate-600 mt-2">將程式綁定到特定硬體（如 MAC 位址）上執行，防止非法複製。</div><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><h4 class="text-lg font-bold text-cyan-800">📦 打包成執行檔</h4><p class="text-slate-600 mt-2">整合 PyInstaller，將所有檔案打包成單一執行檔，方便發布。</div></div></section><section id="comparison"class="content-section space-y-6 pt-16 -mt-16 mb-12"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">程式碼混淆 vs. 程式碼編譯</h2><p class="text-lg text-slate-600">了解 Python 的程式碼混淆與 C/C++ 等語言的編譯在本質上的不同之處，有助於設定合理的安全預期。<div class="overflow-x-auto bg-white rounded-lg shadow-sm border border-slate-200"><table class="w-full text-left"><thead class="bg-slate-100"><tr><th class="p-4 font-semibold">特性<th class="p-4 font-semibold">Python 程式碼混淆 (使用 PyArmor)<th class="p-4 font-semibold">C/C++ 程式碼編譯<tbody class="divide-y divide-slate-200"><tr><td class="p-4 font-medium">保護程度<td class="p-4"><strong>較低</strong>。旨在增加閱讀難度，但理論上仍可被逆向工程還原。<td class="p-4"><strong>較高</strong>。程式碼被編譯成機器碼，逆向工程的技術門檻非常高。<tr><td class="p-4 font-medium">運作原理<td class="p-4">將程式碼轉換為不易讀的格式，執行時透過擴充模組動態解譯給 Python 直譯器。<td class="p-4">將程式碼直接翻譯成 CPU 能執行的二進位機器語言。<tr><td class="p-4 font-medium">執行環境<td class="p-4">仍需 Python 直譯器環境（除非使用打包功能）。<td class="p-4">直接在作業系統上執行，不需額外解譯器。<tr><td class="p-4 font-medium">最終產物<td class="p-4">混淆後的 `.py` 檔案和一個必要的擴充模組。<td class="p-4">單一的可執行檔（如 `.exe`）。</table></div></section><section id="quick-start"class="content-section space-y-6 pt-16 -mt-16 mb-12"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">基本使用方法</h2><div class="space-y-8"><div><h3 class="text-xl font-semibold mb-2">1. 安裝 PyArmor</h3><p class="text-slate-600 mb-2">透過 `pip` 套件管理工具即可安裝。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pip install pyarmor</code></pre></div></div><div><h3 class="text-xl font-semibold mb-2">2. 檢查版本</h3><p class="text-slate-600 mb-2">由於新舊版本指令不同，建議先檢查您安裝的版本。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pyarmor --version</code></pre></div></div><div><h3 class="text-xl font-semibold mb-2">3. 執行混淆指令</h3><p class="text-slate-600 mb-2">在 PyArmor 8.x 及更新版本中，請使用 `gen` 指令。執行後，PyArmor 會建立一個名為 `dist` 的資料夾。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pyarmor gen 你的腳本名稱.py</code></pre></div><div class="mt-4 p-4 border-l-4 border-blue-400 bg-blue-50 rounded-r-lg"><h4 class="font-bold text-blue-800">版本差異說明</h4><p class="text-blue-700 mt-1">- <strong>PyArmor 8.x / 9.x (新版)</strong>: 使用 `gen`、`generate` 或 `g` 指令。<br>- <strong>PyArmor 7.x (舊版)</strong>: 使用 `obfuscate` 指令。</div></div><div><h3 class="text-xl font-semibold mb-2">4. 執行混淆後的程式</h3><p class="text-slate-600 mb-2">混淆後的程式碼需要依賴 `dist` 資料夾中的擴充模組才能執行。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>python dist/你的腳本名稱.py</code></pre></div><p class="text-slate-600 mt-2"><strong>注意</strong>：若要發布，必須將 `dist` 資料夾中的<strong>所有檔案</strong>（包含一個名為 `pyarmor_runtime_000000` 的執行時資料夾）一起提供給使用者。</div></div></section><section id="pro-license"class="content-section space-y-6 pt-16 -mt-16 mb-12"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">PyArmor Pro 專業版授權啟用</h2><div class="space-y-8"><div><h3 class="text-xl font-semibold mb-2">1. 更新 PyArmor 版本</h3><p class="text-slate-600 mb-2">確保您使用的是 PyArmor 9.0 或更新的版本。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pip install -U pyarmor
pyarmor -v</code></pre></div></div><div><h3 class="text-xl font-semibold mb-2">2. 首次啟用授權 (使用 `regcode` 檔案)</h3><p class="text-slate-600 mb-2">使用官方郵件附件中的 `regcode` 檔案進行首次啟用，成功後會生成 `regfile` 檔案。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pyarmor reg -p "YOUR_PRODUCT_NAME" pyarmor-regcode-XXXX.txt</code></pre></div></div><div><h3 class="text-xl font-semibold mb-2">3. 後續裝置註冊 (使用 `regfile` 檔案)</h3><p class="text-slate-600 mb-2">在其他裝置上註冊時，直接使用上一步生成的 `regfile` 檔案即可。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pyarmor reg pyarmor-regfile-XXXX.zip</code></pre></div></div><div class="p-4 border-l-4 border-red-400 bg-red-50 rounded-r-lg"><h4 class="font-bold text-red-800">重要注意事項</h4><ul class="list-disc list-inside text-red-700 mt-2 space-y-1"><li><strong>請務必備份</strong> `regcode` 和 `regfile` 檔案，官方不提供遺失找回服務。<li>`regcode` 僅用於首次啟用，<strong>後續註冊都應使用 `regfile`</strong>。<li><strong>請勿在 Docker 或 CI/CD 流程中</strong>直接使用 `regfile` 註冊，這會快速消耗您的授權額度。</ul></div></div></section><section id="troubleshooting"class="content-section space-y-6 pt-16 -mt-16 mb-12"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">疑難排解：找不到平台擴充模組</h2><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"><h3 class="font-bold text-lg">問題描述</h3><p class="text-slate-600 mt-2">執行混淆或打包時，出現錯誤提示 PyArmor 無法找到特定平台的預建運行時擴充模組，例如 `linux.aarch64.3.8`。<h3 class="font-bold text-lg mt-4">根本原因</h3><p class="text-slate-600 mt-2">此錯誤表示 PyArmor 的預建庫中，沒有提供完全符合您目前作業系統與 Python 版本組合的動態庫檔案。</div><h3 class="text-2xl font-semibold pt-4">解決方案</h3><div id="accordion"class="space-y-2"><div class="accordion-item bg-white border border-slate-200 rounded-lg"><button class="accordion-header w-full text-left p-4 font-medium flex justify-between items-center hover:bg-slate-50">1. 清除平台快取並重試（建議首選） <span class="accordion-icon transition-transform transform">+</span></button><div class="accordion-content overflow-hidden max-h-0 transition-all duration-300"><div class="p-4 border-t border-slate-200"><p class="text-slate-600 mb-2">這是最常見且有效的解決方法。舊的快取可能導致版本不匹配。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code># 刪除現有的平台快取
rm -rf ~/.pyarmor/platforms

# 刪除後，重新執行您的混淆或打包指令
pyarmor gen your_script.py</code></pre></div></div></div></div><div class="accordion-item bg-white border border-slate-200 rounded-lg"><button class="accordion-header w-full text-left p-4 font-medium flex justify-between items-center hover:bg-slate-50">2. 明確指定支援的平台 <span class="accordion-icon transition-transform transform">+</span></button><div class="accordion-content overflow-hidden max-h-0 transition-all duration-300"><div class="p-4 border-t border-slate-200"><p class="text-slate-600 mb-2">平台名稱通常不需要包含 Python 的次要版本號。例如，Linux ARM64 平台應使用 `linux.aarch64`。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>pyarmor gen --platform linux.aarch64 your_script.py</code></pre></div></div></div></div><div class="accordion-item bg-white border border-slate-200 rounded-lg"><button class="accordion-header w-full text-left p-4 font-medium flex justify-between items-center hover:bg-slate-50">3. 檢查支援的平台版本 <span class="accordion-icon transition-transform transform">+</span></button><div class="accordion-content overflow-hidden max-h-0 transition-all duration-300"><div class="p-4 border-t border-slate-200"><p class="text-slate-600 mb-2">您可以手動檢查 PyArmor 實際支援的平台版本。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code># 透過 help 指令查看
pyarmor --help

# 或直接查看已下載的平台資料夾
ls ~/.pyarmor/platforms/</code></pre></div></div></div></div><div class="accordion-item bg-white border border-slate-200 rounded-lg"><button class="accordion-header w-full text-left p-4 font-medium flex justify-between items-center hover:bg-slate-50">4. 使用環境變數強制指定平台 <span class="accordion-icon transition-transform transform">+</span></button><div class="accordion-content overflow-hidden max-h-0 transition-all duration-300"><div class="p-4 border-t border-slate-200"><p class="text-slate-600 mb-2">如果指令參數無效，可以嘗試設定環境變數。<div class="code-block bg-slate-800 text-white p-4 rounded-lg"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code># Linux / macOS
export PYARMOR_PLATFORM=linux.aarch64
pyarmor gen your_script.py

# Windows
set PYARMOR_PLATFORM=linux.aarch64
pyarmor gen your_script.py</code></pre></div></div></div></div></div></section><section id="deployment-issues"class="content-section space-y-6 pt-16 -mt-16"><h2 class="text-3xl font-bold border-b border-slate-200 pb-2 text-cyan-700">加密與自動化部署問題</h2><p class="text-lg text-slate-600">此區塊統整了在使用 PyArmor 加密、透過批次檔 (.bat) 自動化打包，以及使用巨集 (.ttl) 部署到 Linux 伺服器時的常見問題與解決方案。<div class="space-y-6"><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 space-y-4"><h3 class="text-xl font-semibold text-slate-800 flex items-center"><span class="text-amber-500 mr-3">❓</span> 問題 1：ModuleNotFoundError: No module named 'pyarmor_runtime_...'</h3><div><h4 class="font-bold text-red-700">根本原因</h4><p class="text-slate-600 mt-1">PyArmor 加密後的 `.py` 檔案需要一個名為 `pyarmor_runtime_...` 的輔助資料夾才能執行。此錯誤表示您只上傳了加密的 `.py` 檔，而沒有一起上傳這個必要的 runtime 資料夾。</div><div class="pt-2"><h4 class="font-bold text-green-700">解決方案</h4><p class="text-slate-600 mt-1">在打包和部署時，必須將加密後 `dist` 目錄中的<strong>所有內容</strong>（包含主腳本檔案和 `pyarmor_runtime_...` 資料夾）完整地部署到目標環境。</div></div><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 space-y-4"><h3 class="text-xl font-semibold text-slate-800 flex items-center"><span class="text-amber-500 mr-3">❓</span> 問題 2：在 Windows 加密的檔案，無法在 Linux 伺服器上執行</h3><div><h4 class="font-bold text-red-700">根本原因</h4><p class="text-slate-600 mt-1">PyArmor 的 runtime 檔案是<strong>平台相關的</strong>。在 Windows 上產生的 runtime（例如包含 `.pyd` 檔）無法在 Linux 環境下運作（反之亦然），因為它們底層的二進位碼不同。</div><div class="pt-2"><h4 class="font-bold text-green-700">解決方案</h4><ul class="list-decimal list-inside text-slate-600 mt-1 space-y-3"><li><strong>在目標平台加密（最可靠）</strong>：在您的 Linux 伺服器上安裝 PyArmor，並直接在上面執行加密指令。<li><strong>跨平台加密</strong>：若需在 Windows 上產生適用於 Linux 的加密檔案，可在加密時使用 `--platform` 參數指定目標平台。<div class="code-block bg-slate-800 text-white p-4 rounded-lg mt-2"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code># 在 Windows 上產生適用於 Linux x86_64 的加密檔案
pyarmor gen --platform linux_x86_64 GLRT_PDF.py</code></pre></div></ul></div></div><div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 space-y-4"><h3 class="text-xl font-semibold text-slate-800 flex items-center"><span class="text-amber-500 mr-3">❓</span> 問題 3：加密後目錄結構改變，導致 import 失敗</h3><div><h4 class="font-bold text-red-700">根本原因</h4><p class="text-slate-600 mt-1">PyArmor 加密時若指定輸出目錄（例如 `cpd_sdk/`），會改變原始檔案的相對位置，導致原本的 `import` 路徑失效。</div><div class="pt-2"><h4 class="font-bold text-green-700">解決方案</h4><ul class="list-decimal list-inside text-slate-600 mt-1 space-y-3"><li><strong>修改 import 路徑</strong>：在您的主程式 `main.py` 中，明確指定從新的子目錄匯入。<div class="code-block bg-slate-800 text-white p-4 rounded-lg mt-2"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>from cpd_sdk.GLRT_PDF import compute_glrt_metrics</code></pre></div><li><strong>動態新增路徑 (不改 import)</strong>：在 `main.py` 開頭將 SDK 資料夾的路徑動態加入到 Python 的搜尋路徑中，這樣就不需修改後續的 import 語句。<div class="code-block bg-slate-800 text-white p-4 rounded-lg mt-2"><button class="copy-button bg-slate-600 text-white">複製</button><pre><code>import sys
# 將 cpd_sdk 加到搜尋路徑的最前面
sys.path.insert(0, "cpd_sdk")
# 維持原樣
from GLRT_PDF import compute_glrt_metrics</code></pre></div></ul></div></div></div></section></div></main><script>document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("mobile-menu-button"),t=document.getElementById("mobile-menu");e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),t.classList.toggle("hidden")}),t.addEventListener("click",n=>{"A"===n.target.tagName&&(e.setAttribute("aria-expanded","false"),t.classList.add("hidden"))});document.querySelectorAll(".copy-button").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling.querySelector("code").innerText;navigator.clipboard.writeText(t).then(()=>{e.textContent="已複製!",setTimeout(()=>{e.textContent="複製"},2e3)})})});const n=document.querySelectorAll(".accordion-item");n.forEach(e=>{const t=e.querySelector(".accordion-header"),o=e.querySelector(".accordion-content"),c=e.querySelector(".accordion-icon");t.addEventListener("click",()=>{const t=o.style.maxHeight&&"0px"!==o.style.maxHeight;n.forEach(t=>{t!==e&&(t.querySelector(".accordion-content").style.maxHeight="0px",t.querySelector(".accordion-icon").classList.remove("rotate-45"),t.querySelector(".accordion-icon").textContent="+")}),t?(o.style.maxHeight="0px",c.classList.remove("rotate-45"),c.textContent="+"):(o.style.maxHeight=o.scrollHeight+"px",c.classList.add("rotate-45"),c.textContent="+")})});const o=document.querySelectorAll(".content-section"),c=document.querySelectorAll(".nav-link"),r=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const t=e.target.getAttribute("id"),n=document.querySelector(`.nav-link[href="#${t}"]`);c.forEach(e=>{e.classList.remove("active")}),n&&n.classList.add("active")}})},{rootMargin:"-20% 0px -80% 0px"});o.forEach(e=>{r.observe(e)})})</script>