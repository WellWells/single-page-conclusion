<!doctypehtml><html lang="zh-TW"><meta name="twitter:image"content="https://wellstsai.com/single-page-conclusion/%E8%99%9B%E6%93%AC%E5%A4%A9%E7%B7%9A-Virtual-Element-%E6%BC%94%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90.png"><meta name="twitter:description"content="本文分析虛擬天線擴展 (Virtual Element Extension) 技術，探討如何透過 Burg 演算法與相位外推，在 1T3R 等受限硬體下突破瑞利限制。內容涵蓋二維到達角 (2D Direction of Arrival, DOA) 估計、數位波束成形與 3D 點雲成像之核心邏輯。"><meta name="twitter:title"content="虛擬天線-Virtual-Element-演算法分析"><meta name="twitter:card"content="summary_large_image"><meta property="og:type"content="article"><meta property="og:site_name"content="WellWells"><meta property="og:image"content="https://wellstsai.com/single-page-conclusion/%E8%99%9B%E6%93%AC%E5%A4%A9%E7%B7%9A-Virtual-Element-%E6%BC%94%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90.png"><meta property="og:url"content="https://wellstsai.com/single-page-conclusion/%E8%99%9B%E6%93%AC%E5%A4%A9%E7%B7%9A-Virtual-Element-%E6%BC%94%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90.html"><meta property="og:description"content="本文分析虛擬天線擴展 (Virtual Element Extension) 技術，探討如何透過 Burg 演算法與相位外推，在 1T3R 等受限硬體下突破瑞利限制。內容涵蓋二維到達角 (2D Direction of Arrival, DOA) 估計、數位波束成形與 3D 點雲成像之核心邏輯。"><meta property="og:title"content="虛擬天線-Virtual-Element-演算法分析"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><meta name="description"content="深入剖析虛擬天線（VE）擴展演算法與 Burg 方法在 FMCW 毫米波雷達中的應用，涵蓋系統架構、天線陣列配置、訊號預處理、相位外推原理與 Python/C 實作差異，突破物理孔徑限制實現高解析度 3D 點雲成像。"><title>虛擬天線（VE）演算法深度剖析：突破物理極限的毫米波雷達 2D DOA 估計</title><link rel="preconnect"href="https://fonts.googleapis.com"><link rel="preconnect"href="https://fonts.gstatic.com"crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=JetBrains+Mono:wght@400&display=swap"rel="stylesheet"><script src="https://cdn.tailwindcss.com"></script><script>tailwind.config={theme:{extend:{fontFamily:{sans:['"Noto Sans TC"',"sans-serif"],mono:['"JetBrains Mono"',"monospace"]},boxShadow:{glow:"0 0 20px rgba(56, 189, 248, 0.15)"}}}}</script><link rel="stylesheet"href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script defer="defer"src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script><script defer="defer"src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!1})})</script><style>body{font-feature-settings:"palt";letter-spacing:.02em}.glass-card{background:rgba(15,23,42,.6);backdrop-filter:blur(12px);border:1px solid rgba(148,163,184,.1)}.section-heading{position:relative;padding-left:1rem;margin-bottom:1.5rem;color:#f8fafc}.section-heading::before{content:'';position:absolute;left:0;top:.25em;bottom:.25em;width:4px;background:linear-gradient(to bottom,#38bdf8,#818cf8);border-radius:2px}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-track{background:#0f172a}::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}table{border-collapse:separate;border-spacing:0;width:100%}th{background:rgba(30,41,59,.8);font-weight:600;color:#e2e8f0;padding:.75rem 1rem;text-align:left;border-bottom:1px solid rgba(148,163,184,.2)}td{padding:.75rem 1rem;border-bottom:1px solid rgba(148,163,184,.1);color:#cbd5e1}tr:hover td{background:rgba(56,189,248,.05)}.toc-link{transition:all .2s}.toc-link:hover{color:#38bdf8;padding-left:.5rem}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JKC4KZLT26"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JKC4KZLT26")</script><body class="min-h-screen bg-gradient-to-b from-[#0f172a] via-[#172554] to-[#020617] text-slate-300 font-sans antialiased"><a href="#"id="back-to-top"class="fixed bottom-8 right-8 z-50 p-3 rounded-full bg-sky-600/20 text-sky-400 border border-sky-500/30 backdrop-blur-sm hover:bg-sky-500/30 transition-all opacity-0 pointer-events-none translate-y-4"><svg xmlns="http://www.w3.org/2000/svg"class="h-6 w-6"fill="none"viewBox="0 0 24 24"stroke="currentColor"><path stroke-linecap="round"stroke-linejoin="round"stroke-width="2"d="M5 10l7-7m0 0l7 7m-7-7v18"/></svg></a><header class="relative pt-16 pb-12 px-4 text-center"><div class="max-w-4xl mx-auto"><div class="inline-block mb-4 px-3 py-1 rounded-full bg-sky-500/10 border border-sky-400/20 text-sky-300 text-sm font-medium">FMCW RADAR · DOA ESTIMATION</div><h1 class="text-3xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-200 via-white to-indigo-200 mb-6 leading-tight">虛擬天線（VE）演算法深度剖析</h1><p class="text-lg text-slate-400 max-w-2xl mx-auto">突破物理極限的毫米波雷達 2D DOA 估計：從相位外推原理到嵌入式實作的完整技術解構</div></header><section class="px-4 mb-12"><div class="max-w-4xl mx-auto glass-card rounded-2xl p-6 shadow-glow"><h2 class="text-xl font-bold text-sky-100 mb-4 flex items-center gap-2"><span>⚡</span> 核心洞見</h2><div class="grid gap-3 md:grid-cols-2 lg:grid-cols-4 text-sm"><div class="bg-slate-900/50 p-3 rounded-xl border border-white/5"><strong class="text-sky-300 block mb-1">1T3R → 7×7 虛擬陣列</strong><p class="text-slate-400">透過相位外推，3 個實體天線可合成 49 個虛擬通道，波束寬度壓縮約 7 倍。</div><div class="bg-slate-900/50 p-3 rounded-xl border border-white/5"><strong class="text-sky-300 block mb-1">平面波假設</strong><p class="text-slate-400">遠場條件下波前相位呈線性分布，是外推演算法的物理基石。</div><div class="bg-slate-900/50 p-3 rounded-xl border border-white/5"><strong class="text-sky-300 block mb-1">單一目標限制</strong><p class="text-slate-400">演算法假設場景中僅有單一主導目標，多目標場景會導致鬼影與角度偏差。</div><div class="bg-slate-900/50 p-3 rounded-xl border border-white/5"><strong class="text-sky-300 block mb-1">SNR 敏感性</strong><p class="text-slate-400">相位誤差隨外推距離累積放大，低 SNR 環境下可能發生相位卷繞。</div></div></div></section><nav class="px-4 mb-12"><div class="max-w-4xl mx-auto glass-card rounded-xl p-6"><h2 class="text-lg font-bold text-white mb-4">📑 目錄</h2><div class="grid md:grid-cols-2 gap-x-8 gap-y-1 text-sm"><a href="#sec1"class="toc-link text-slate-400">1. 演算法概述與理論基礎</a> <a href="#sec6"class="toc-link text-slate-400">6. 虛擬天線相位外推核心技術</a> <a href="#sec2"class="toc-link text-slate-400">2. 系統架構與資料流程</a> <a href="#sec7"class="toc-link text-slate-400">7. 高解析度成像與 3D 點雲輸出</a> <a href="#sec3"class="toc-link text-slate-400">3. 天線陣列配置與幾何分析</a> <a href="#sec8"class="toc-link text-slate-400">8. 演算法局限性與多徑效應</a> <a href="#sec4"class="toc-link text-slate-400">4. 訊號預處理與頻譜分析</a> <a href="#sec9"class="toc-link text-slate-400">9. Python 與 C 實作差異</a> <a href="#sec5"class="toc-link text-slate-400">5. 第一階段 DOA 與相位梯度估計</a> <a href="#conclusion"class="toc-link text-slate-400">結論</a></div></div></nav><main class="max-w-4xl mx-auto px-4 pb-16 space-y-16"><article id="sec1"><h2 class="text-2xl font-bold mb-6 section-heading">🧭 1. 演算法概述與理論基礎</h2><p class="mb-4">本研究剖析基於<strong>虛擬天線擴展（Virtual Element Extension, VE）</strong>技術的 2D DOA（Direction of Arrival）估計演算法。該演算法主要應用於 SIMO-FMCW（Single-Input Multiple-Output Frequency-Modulated Continuous-Wave）雷達系統，核心目標在於突破受限的實體孔徑限制，透過先進訊號處理手段合成大孔徑虛擬陣列。<h3 class="text-xl font-bold text-white mt-8 mb-4">1.1 雷達感測技術演進與超解析度需求</h3><p class="mb-4">傳統雷達的角度解析度 $\Delta\theta$ 與天線陣列的物理孔徑 $D$ 成反比：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \Delta\theta \approx \frac{\lambda}{D \cdot \cos\theta} $$</div><p class="mb-4">標準 MIMO 技術可透過分時多工（TDM）或分碼多工（CDM）形成虛擬孔徑，但「虛擬」程度仍受限於 $N_{TX} \times N_{RX}$ 的乘積。當 $N_{TX} = 1$（SIMO 架構）時，MIMO 技術無法發揮作用。<p class="mb-4"><strong>相位外推（Phase Extrapolation）</strong>演算法代表了更激進的解決方案：它不依賴發射端多樣性，而是深入挖掘電磁波空間傳播特性，利用極少量實體接收天線測得的局部相位梯度，在數學上「預測」並「合成」出更大陣列應有的訊號相位。<h3 class="text-xl font-bold text-white mt-8 mb-4">1.2 VE 的核心哲學：遠場平面波假設</h3><p class="mb-4">演算法建立在<strong>遠場平面波假設（Far-Field Plane Wave Assumption）</strong>之上。當目標距離雷達大於瑞利距離 $2D^2/\lambda$ 時，電磁波前可視為平面，相鄰天線間的相位差僅由入射角度與天線間距決定，且在空間上呈現線性變化。<div class="bg-indigo-900/20 border-l-4 border-indigo-500 p-4 rounded-r-lg my-6"><strong class="text-indigo-200 block mb-2">兩階段波束成形策略</strong><ol class="list-decimal list-inside text-sm space-y-1 opacity-90"><li><strong>粗估階段（Coarse Estimation）</strong>：利用 3 個實體天線進行低解析度 DBF，鎖定目標大致方向，提取相位梯度特徵。<li><strong>精算階段（Fine Estimation）</strong>：基於提取的相位特徵，數學合成 49 個（7×7）虛擬天線訊號，對虛擬陣列進行高解析度 DBF，獲得精細 3D 點雲。</ol></div><h3 class="text-xl font-bold text-white mt-8 mb-4">1.3 技術特點與應用場景</h3><div class="grid md:grid-cols-2 gap-4 mb-6"><div class="bg-slate-800/40 p-4 rounded-lg border border-slate-700"><strong class="text-green-400 block mb-2">✅ 優勢</strong><ul class="text-sm space-y-1 text-slate-400 list-disc pl-4"><li>極簡硬體架構（1T3R 即可運作）<li>軟體定義解析度（可動態調整虛擬陣列大小）<li>3D 點雲輸出（Range × Azimuth × Elevation）<li>整合高通濾波，專注移動目標</ul></div><div class="bg-slate-800/40 p-4 rounded-lg border border-slate-700"><strong class="text-red-400 block mb-2">⚠️ 限制</strong><ul class="text-sm space-y-1 text-slate-400 list-disc pl-4"><li>犧牲多目標分辨能力<li>對 SNR 容忍度較低<li>多徑環境產生鬼影目標<li>單一平面波假設易崩潰</ul></div></div></article><article id="sec2"><h2 class="text-2xl font-bold mb-6 section-heading">🔄 2. 系統架構與資料流程</h2><h3 class="text-xl font-bold text-white mb-4">2.1 FMCW 雷達訊號鏈路模型</h3><p class="mb-4">FMCW 雷達透過發射頻率隨時間線性變化的 Chirp 訊號，將接收回波與發射訊號混頻產生中頻訊號（IF）。中頻訊號頻率 $f_{IF}$ 與目標距離 $R$ 成正比。整個處理鏈路可視為一系列維度變換：從時域到頻域，再到空間域。<h3 class="text-xl font-bold text-white mt-8 mb-4">2.2 資料立方體（Data Cube）維度變換</h3><div class="overflow-x-auto rounded-lg border border-slate-700 mb-6"><table><thead><tr><th>階段<th>資料結構<th>物理意義<tbody><tr><td class="font-medium text-white">Raw Data<td class="font-mono text-xs">[Frames, Chirps, RX, Samples]<td>Frames=慢時間, Chirps=多普勒維度, RX=空間維度, Samples=快時間<tr><td class="font-medium text-white">Range Profile<td class="font-mono text-xs">[Frames, Chirps, RX, RangeBins]<td>經 Range FFT 後，Samples 轉換為距離單元<tr><td class="font-medium text-white">Angle Spectrum<td class="font-mono text-xs">[RangeBins, Azimuth, Elevation]<td>經 DOA 處理後，RX 維度轉化為角度維度</table></div><h3 class="text-xl font-bold text-white mt-8 mb-4">2.3 回饋式處理架構的穩定性分析</h3><p class="mb-4">此架構具有「回饋式」處理邏輯：第二階段的虛擬陣列生成強烈依賴第一階段的決策結果（估計出的峰值角度）。這意味著系統魯棒性高度取決於第一階段能否正確捕捉目標主瓣方向。<div class="bg-yellow-900/10 border border-yellow-500/20 p-4 rounded-lg"><strong class="text-yellow-500 block mb-1">⚠️ Garbage In, Garbage Out</strong><p class="text-sm text-yellow-200/70">若第一階段受雜訊或多徑干擾導致峰值偏移，將計算出錯誤的相位梯度，虛擬陣列基於錯誤假設合成，第二階段 DBF 將能量聚焦在錯誤位置。</div></article><article id="sec3"><h2 class="text-2xl font-bold mb-6 section-heading">📡 3. 天線陣列配置與幾何分析</h2><h3 class="text-xl font-bold text-white mb-4">3.1 1T3R L 型陣列的幾何特性</h3><p class="mb-4">L 型排列（L-shaped Array）是進行 2D DOA 估計的最簡幾何結構，利用正交的兩個基線分別解算方位角與俯仰角。<div class="overflow-x-auto rounded-lg border border-slate-700 mb-6"><table><thead><tr><th>天線<th>X 座標 (λ/2)<th>Z 座標 (λ/2)<th>功能<tbody><tr><td class="font-medium text-white">RX0<td>0<td>0<td>參考天線（相位原點）<tr><td class="font-medium text-white">RX1<td>-1<td>0<td>提供水平相位差 $\Delta\Phi_x$<tr><td class="font-medium text-white">RX2<td>0<td>1<td>提供垂直相位差 $\Delta\Phi_z$</table></div><p class="text-sm text-slate-500 mb-4">註：若工作頻率為 77GHz，則 $\lambda \approx 3.9$mm，天線間距約 1.95mm。<h3 class="text-xl font-bold text-white mt-8 mb-4">3.2 Grating Lobe 的物理限制</h3><p class="mb-4">天線間距 $d$ 被嚴格設定為 $\lambda/2$，以避免 Grating Lobe（光柵瓣）。若 $d > \lambda/2$，可見空間內會出現額外極大值：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \sin\theta_{grating} = \sin\theta_{main} \pm \frac{\lambda}{d} $$</div><p class="mb-4">$\lambda/2$ 間距確保相位差 $\Delta\phi$ 唯一映射到 $[-\pi, \pi]$ 區間，避免相位卷繞帶來的解算錯誤。虛擬生成的天線間距同樣必須設定為 $\lambda/2$。</article><article id="sec4"><h2 class="text-2xl font-bold mb-6 section-heading">🔧 4. 訊號預處理與頻譜分析</h2><h3 class="text-xl font-bold text-white mb-4">4.1 高通濾波器設計：Butterworth 濾波器</h3><p class="mb-4">室內環境中，靜態物體（牆壁、家具）回波強度往往比人體訊號高出數十 dB。二階 Butterworth 高通濾波器具有通帶內<strong>最平坦的頻率響應</strong>，不會對保留下來的目標訊號造成振幅紋波。<div class="grid md:grid-cols-2 gap-4 mb-6"><div class="bg-slate-800/40 p-4 rounded-lg border border-slate-700"><strong class="text-sky-300 block mb-2">階數選擇（Order = 2）</strong><ul class="text-sm space-y-1 text-slate-400 list-disc pl-4"><li>階數過高：暫態響應長，邊緣效應擴散<li>階數過低：滾降太慢，無法抑制低頻雜波</ul></div><div class="bg-slate-800/40 p-4 rounded-lg border border-slate-700"><strong class="text-sky-300 block mb-2">零相位濾波（filtfilt）</strong><p class="text-sm text-slate-400">正向濾波後反轉再濾波，徹底消除相位延遲，確保相位真實性——這對 DOA 演算法至關重要。</div></div><h3 class="text-xl font-bold text-white mt-8 mb-4">4.2 Range FFT 與窗函數效應</h3><p class="mb-4">將時域中頻訊號轉換為距離譜。加窗（Hanning/Hamming）可壓低旁瓣，提高動態範圍，讓雷達能同時偵測強目標旁的弱目標，代價是主瓣變寬，距離解析度略微下降。<h3 class="text-xl font-bold text-white mt-8 mb-4">4.3 陣列校準：通道間相位與振幅補償</h3><p class="mb-4">PCB 走線長度差異、LNA/Mixer 增益變異等會引入相位誤差。校準方法：在雷達正前方放置角反射器，測量各通道相位差，計算補償因子：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \text{calFactor}_i = \frac{\overline{S_i[k_{max}]}}{|S_i[k_{max}]|^2} $$</div></article><article id="sec5"><h2 class="text-2xl font-bold mb-6 section-heading">🎯 5. 第一階段 DOA 與相位梯度估計</h2><h3 class="text-xl font-bold text-white mb-4">5.1 數位波束成形（DBF）數學原理</h3><p class="mb-4">DBF 本質上是空間濾波，通過對各天線接收訊號加權求和，使主波束指向特定方向：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ P(\theta_{az}, \theta_{el}) = \mathbf{a}(\theta_{az}, \theta_{el})^H \mathbf{S} = \sum_{n=0}^{N-1} S_n \cdot e^{-j\phi_n(\theta_{az}, \theta_{el})} $$</div><h3 class="text-xl font-bold text-white mt-8 mb-4">5.2 導向向量（Steering Vector）建構</h3><p class="mb-4">對於方向 $(\theta_{az}, \theta_{el})$，第 $n$ 個天線的理想相位延遲為：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \phi_n = \pi (x_n \sin\theta_{az} \cos\theta_{el} + z_n \sin\theta_{el}) $$</div><p class="mb-4">1T3R 展開：RX0 → $\phi_0 = 0$；RX1 → $e^{j\pi \sin\theta_{az} \cos\theta_{el}}$；RX2 → $e^{-j\pi \sin\theta_{el}}$。<h3 class="text-xl font-bold text-white mt-8 mb-4">5.3 峰值搜尋與單一目標假設</h3><p class="mb-4">在 2D 頻譜圖上尋找最大值：$(\hat{\theta}_{az}, \hat{\theta}_{el}) = \arg\max P(\theta_{az}, \theta_{el})$<div class="bg-red-900/10 border border-red-500/20 p-4 rounded-lg"><strong class="text-red-400 block mb-1">⚠️ 關鍵物理假設</strong><p class="text-sm text-red-200/70">此步驟隱含「單一主導目標」假設。若存在兩個能量相近的目標，DBF 譜可能合併成錯誤峰值，VE 演算法會基於錯誤假設進行外推。</div></article><article id="sec6"><h2 class="text-2xl font-bold mb-6 section-heading">🧮 6. 核心技術：虛擬天線相位外推</h2><h3 class="text-xl font-bold text-white mb-4">6.1 平面波傳播模型與相位線性度</h3><p class="mb-4">遠場條件下，平面波相位在傳播方向的垂直平面上呈線性分布：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \phi(\mathbf{r}) = \phi_0 + \nabla \phi \cdot \mathbf{r} $$</div><p class="mb-4">既然第一階段 DBF 已估計出角度（即 $\nabla \phi$），即可繪製整個波前的相位分布圖。<h3 class="text-xl font-bold text-white mt-8 mb-4">6.2 從 3 實體到 49 虛擬通道的數學映射</h3><p class="mb-4">利用 1T3R 測得的水平相位差 $\Delta\Phi_x$（由 RX0, RX1 決定）和垂直相位差 $\Delta\Phi_z$（由 RX0, RX2 決定）作為基底。對於虛擬陣列中索引 $(j, k)$ 的天線：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ \Phi_{virtual}(j, k) = \Phi_{ref} + j \cdot \Delta\Phi_z + k \cdot \Delta\Phi_x $$</div><h3 class="text-xl font-bold text-white mt-8 mb-4">6.3 振幅恆定性的假設</h3><p class="mb-4">合成虛擬訊號：$VE[j, k] = S_{ref} \times W_z[j] \times W_x[k]$，外推因子皆為單位模長：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ |VE[j, k]| = |S_{ref}| \cdot |W_z| \cdot |W_x| = |S_{ref}| $$</div><p class="mb-4 text-sm text-slate-500">所有 49 個虛擬天線振幅完全相同。這是極強的理想化假設，忽略了天線方向圖、多徑衰減與互耦效應，喪失了真實大陣列的空間分集增益。<h3 class="text-xl font-bold text-white mt-8 mb-4">6.4 解析度提升的物理量化</h3><div class="overflow-x-auto rounded-lg border border-slate-700 mb-6"><table><thead><tr><th>配置<th>有效孔徑<th>波束寬度<tbody><tr><td class="font-medium text-white">物理陣列（1T3R）<td>$1 \cdot \lambda/2$<td>約 100°（極寬）<tr><td class="font-medium text-white">虛擬陣列（7×7）<td>$7 \cdot \lambda/2 = 3.5\lambda$<td>約 16.4°（波束寬度壓縮約 7 倍）</table></div></article><article id="sec7"><h2 class="text-2xl font-bold mb-6 section-heading">📊 7. 高解析度成像與 3D 點雲輸出</h2><h3 class="text-xl font-bold text-white mb-4">7.1 虛擬陣列的 2D DBF 運算</h3><p class="mb-4">對 7×7 空間數據進行 2D 空間傅立葉變換（2D Spatial FFT），將空間域訊號變換到波數域（角度域）。由於孔徑變大，頻譜主瓣變得非常尖銳。<h3 class="text-xl font-bold text-white mt-8 mb-4">7.2 座標轉換</h3><p class="mb-4">從球座標 $(R, \theta_{az}, \theta_{el})$ 到直角座標 $(x, y, z)$：<div class="bg-black/30 p-4 rounded-lg border border-slate-700 mb-4 overflow-x-auto"><p class="text-center">$$ x = R \sin\theta_{az} \cos\theta_{el}, \quad z = R \sin\theta_{el}, \quad y = R \cos\theta_{az} \cos\theta_{el} $$</div></article><article id="sec8"><h2 class="text-2xl font-bold mb-6 section-heading">🧷 8. 演算法局限性與多徑效應</h2><h3 class="text-xl font-bold text-white mb-4">8.1 單一目標假設的崩潰</h3><p class="mb-4">若同一 Range Bin 內有兩個能量相近的目標（$\theta_1, \theta_2$），演算法可能鎖定合併的「中間角度」，外推出的相位梯度不對應任何真實目標，產生虛假目標。<h3 class="text-xl font-bold text-white mt-8 mb-4">8.2 多徑傳播與鬼影目標機制</h3><p class="mb-4">多徑訊號通常來自錯誤角度。若多徑訊號強於直射訊號，演算法會鎖定多徑方向進行外推，在虛擬成像中產生逼真的「鬼影」——由於 VE 高解析度特性，這個鬼影極難通過簡單閾值過濾。<h3 class="text-xl font-bold text-white mt-8 mb-4">8.3 SNR 對相位外推精度的非線性影響</h3><p class="mb-4">相位測量精度受 SNR 限制：$\sigma_{\phi}^2 \propto 1/\text{SNR}$。外推到第 7 個虛擬天線時，相位誤差變為 $7 \times \delta\phi$。當累積誤差接近 $\pi$ 時，會發生<strong>相位卷繞</strong>，導致虛擬訊號相位完全反轉。<div class="bg-red-900/10 border border-red-500/20 p-4 rounded-lg"><strong class="text-red-400 block mb-1">⚠️ SNR 需求</strong><p class="text-sm text-red-200/70">VE 演算法對 SNR 要求比實體陣列高得多。在低 SNR 環境下，虛擬陣列增益優勢會被急劇增加的相位雜訊所抵消。</div></article><article id="sec9"><h2 class="text-2xl font-bold mb-6 section-heading">💻 9. Python 與 C 實作差異</h2><h3 class="text-xl font-bold text-white mb-4">9.1 記憶體管理</h3><div class="overflow-x-auto rounded-lg border border-slate-700 mb-6"><table><thead><tr><th>面向<th>Python<th>C（嵌入式）<tbody><tr><td class="font-medium text-white">記憶體管理<td>Garbage Collection 自動釋放<td>手動 malloc/free，需避免碎片化<tr><td class="font-medium text-white">迴圈效能<td>直譯器處理慢 10-100 倍<td>編譯器 -O3 可轉 SIMD 指令<tr><td class="font-medium text-white">數值精度<td>預設 float64（double）<td>常用 float32（MCU 快 2-4 倍）</table></div><h3 class="text-xl font-bold text-white mt-8 mb-4">9.2 優化策略</h3><ul class="list-disc pl-6 space-y-2 text-slate-400 mb-6"><li><strong class="text-white">Python</strong>：使用 numba 或 cython 編譯迴圈，或完全向量化<li><strong class="text-white">C</strong>：預計算 Steering Vectors 為查找表（LUT），避免迴圈中呼叫三角函數<li><strong class="text-white">嵌入式</strong>：系統初始化時分配靜態緩衝區，運行時禁止動態分配</ul><h3 class="text-xl font-bold text-white mt-8 mb-4">9.3 數值精度考量</h3><p class="mb-4">使用單精度 float 時，相位誤差累積可能在 7×7 陣列邊緣天線處變得顯著。建議在 PC 端進行 float vs double 的位元級對比（Bit-exact simulation），確認精度損失是否影響最終角度解析度。</article><article id="conclusion"><h2 class="text-2xl font-bold mb-6 section-heading">✅ 結論</h2><p class="mb-4">本研究詳細剖析了基於 1T3R 架構的虛擬天線（VE）2D DOA 演算法。該技術透過創新的相位外推手段，成功以極低硬體成本實現了擬似大孔徑陣列的高解析度成像能力。<p class="mb-4">然而，物理定律不可違背。VE 演算法的「超能力」來自對物理場景的強假設——主要是<strong>單一目標</strong>與<strong>平面波假設</strong>。在複雜的多目標場景或低 SNR 環境時，其虛擬陣列可能產生誤導性的鬼影或角度偏差。<p class="mb-4">在實際產品化過程中，應結合 CFAR 檢測、動態 SNR 評估以及目標追蹤邏輯（Tracking Logic），構建具備容錯能力的穩健系統。對於追求極致性價比的 IoT 雷達應用，VE 演算法無疑是一項極具價值的核心技術。</article></main><footer class="mt-16 py-10 bg-slate-950 text-center border-t border-slate-900"><p class="text-slate-500 text-sm mb-2">Generated by <a href="https://wellstsai.com"target="_blank"rel="noopener noreferrer"class="text-sky-500 hover:text-sky-400 underline decoration-sky-500/30 underline-offset-4">wellstsai.com</a><p class="text-slate-600 text-xs font-mono">撰寫日期：2026-02-03</footer><script>const backToTop=document.getElementById("back-to-top");window.addEventListener("scroll",()=>{window.scrollY>300?backToTop.classList.remove("opacity-0","pointer-events-none","translate-y-4"):backToTop.classList.add("opacity-0","pointer-events-none","translate-y-4")}),backToTop.addEventListener("click",o=>{o.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})</script>