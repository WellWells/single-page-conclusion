<!doctypehtml><html lang="zh-Hant"><meta name="twitter:image"content="https://wellstsai.com/single-page-conclusion/SPI%E5%8D%94%E5%AE%9A-%E9%81%8B%E4%BD%9C%E6%A8%A1%E5%BC%8F-CPOL-CPHA-%E8%88%87I2C%E6%AF%94%E8%BC%83.png"><meta name="twitter:description"content="探討 SPI 協定，一種嵌入式系統的同步序列通訊。說明 SCLK、MOSI、MISO 四線架構，CPOL 與 CPHA 的四種操作模式，並比較其與 I²C 的速度及優缺點。"><meta name="twitter:title"content="SPI協定-運作模式-CPOL-CPHA-與I2C比較"><meta name="twitter:card"content="summary_large_image"><meta property="og:type"content="article"><meta property="og:site_name"content="WellWells"><meta property="og:image"content="https://wellstsai.com/single-page-conclusion/SPI%E5%8D%94%E5%AE%9A-%E9%81%8B%E4%BD%9C%E6%A8%A1%E5%BC%8F-CPOL-CPHA-%E8%88%87I2C%E6%AF%94%E8%BC%83.png"><meta property="og:url"content="https://wellstsai.com/single-page-conclusion/SPI%E5%8D%94%E5%AE%9A-%E9%81%8B%E4%BD%9C%E6%A8%A1%E5%BC%8F-CPOL-CPHA-%E8%88%87I2C%E6%AF%94%E8%BC%83.html"><meta property="og:description"content="探討 SPI 協定，一種嵌入式系統的同步序列通訊。說明 SCLK、MOSI、MISO 四線架構，CPOL 與 CPHA 的四種操作模式，並比較其與 I²C 的速度及優缺點。"><meta property="og:title"content="SPI協定-運作模式-CPOL-CPHA-與I2C比較"><meta name="description"content="探討 SPI 協定，一種嵌入式系統的同步序列通訊。說明 SCLK、MOSI、MISO 四線架構，CPOL 與 CPHA 的四種操作模式，並比較其與 I²C 的速度及優缺點。"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>SPI 協定深入探討</title><script src="https://cdn.tailwindcss.com"></script><link rel="preconnect"href="https://fonts.googleapis.com"><link rel="preconnect"href="https://fonts.gstatic.com"crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap"rel="stylesheet"><style>body{font-family:Inter,'Noto Sans TC',sans-serif}h1,h2,h3,h4,h5,h6{font-feature-settings:"liga" 0}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JKC4KZLT26"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JKC4KZLT26")</script><body class="bg-gradient-to-b from-slate-900 to-gray-900 text-slate-300 selection:bg-sky-500 selection:text-white pb-20"><header class="text-center py-12 md:py-20 px-4"><h1 class="text-4xl md:text-6xl font-bold text-white mb-4">SPI 協定深入探討</h1><p class="text-lg md:text-xl text-sky-300 max-w-3xl mx-auto">了解嵌入式系統中，用於晶片間高速、同步、全雙工的序列通訊</header><main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 space-y-12"><section class="max-w-4xl mx-auto"><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-2xl p-6 md:p-8"><h2 class="text-2xl font-bold text-white text-center mb-6">💡 核心摘要</h2><ul class="list-inside list-disc space-y-3 text-slate-300 text-base md:text-lg"><li><strong>Serial Peripheral Interface (SPI)</strong> 是一種同步、全雙工、主從架構的序列通訊協定。<li>主要用於單一電路板 (PCB) 上，微控制器 (MCU) 與感測器、記憶體等周邊設備間的<strong>短距離、高速</strong>通訊。<li>使用四條主要訊號線：<strong class="text-sky-300">SCLK</strong>、<strong class="text-sky-300">MOSI</strong>、<strong class="text-sky-300">MISO</strong> 與 <strong class="text-sky-300">CS/SS</strong>。<li>相較於 I²C，SPI 通常提供更高的資料傳輸速率，但需要更多的訊號線。<li>協定本身<strong>不包含</strong>定址、流量控制或應答機制，結構相對簡單。</ul></div></section><section><h2 class="text-3xl font-bold text-white mb-6">🤔 什麼是 SPI？</h2><div class="space-y-4 text-lg text-slate-300 leading-relaxed"><p><strong>SPI</strong>，全名為 <strong>Serial Peripheral Interface（序列周邊介面）</strong>，是由 Motorola 開發的一種同步序列通訊協定。它被廣泛應用於嵌入式系統中，作為微控制器 (MCU) 與各種周邊設備（如感測器、Flash 記憶體、類比數位轉換器 (ADC)、數位類比轉換器 (DAC)、即時時鐘 (RTC) 或顯示器）之間的通訊橋樑。<p>SPI 的核心特性是其<strong>主從 (Master-Slave) 架構</strong>。通訊總是 由 Master 設備發起，Master 負責產生時脈訊號 (Clock) 並控制整個通訊過程。Slave 設備則被動地回應 Master 的指令。SPI 支援<strong>全雙工 (Full-Duplex)</strong> 通訊，意味著資料可以在同一時間雙向傳輸（Master 傳送給 Slave，同時 Slave 傳送給 Master）。</div></section><section><h2 class="text-3xl font-bold text-white mb-8">⚡ 四條核心訊號線</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6 transition-all duration-300 hover:shadow-sky-500/20 hover:border-sky-700"><h3 class="text-2xl font-semibold text-sky-300 mb-3">SCLK (Serial Clock)</h3><p class="text-slate-300"><strong>序列時脈</strong>。由 Master 產生，用於同步 Master 和 Slave 之間的資料傳輸。資料在時脈的特定邊緣（上升緣或下降緣，依 SPI 模式而定）被傳輸和取樣。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6 transition-all duration-300 hover:shadow-sky-500/20 hover:border-sky-700"><h3 class="text-2xl font-semibold text-sky-300 mb-3">MOSI (Master Out, Slave In)</h3><p class="text-slate-300"><strong>主出從入</strong>。此訊號線用於 Master 將資料傳送給 Slave。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6 transition-all duration-300 hover:shadow-sky-500/20 hover:border-sky-700"><h3 class="text-2xl font-semibold text-sky-300 mb-3">MISO (Master In, Slave Out)</h3><p class="text-slate-300"><strong>主入從出</strong>。此訊號線用於 Slave 將資料傳送回 Master。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6 transition-all duration-300 hover:shadow-sky-500/20 hover:border-sky-700"><h3 class="text-2xl font-semibold text-sky-300 mb-3">CS / SS (Chip Select / Slave Select)</h3><p class="text-slate-300"><strong>晶片選擇 / 隨從選擇</strong>。由 Master 驅動，用於在多個 Slave 設備中選擇一個特定的設備進行通訊。這條線通常是<strong>低電位致能 (Active Low)</strong>。</div></div></section><section><h2 class="text-3xl font-bold text-white mb-8">🔄 連接拓撲 (Topologies)</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h3 class="text-xl font-semibold text-sky-300 mb-2">1. 多重 Slave 連接</h3><p>這是最常見的配置。Master 的 SCLK, MOSI, MISO 線並聯到所有的 Slave。Master 則使用<strong>獨立的 CS 線</strong>來分別致能（選擇）要通訊的 Slave。一次只能選擇一個 Slave。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h3 class="text-xl font-semibold text-sky-300 mb-2">2. 菊鏈 (Daisy-Chain)</h3><p>在此配置中，所有 Slave 共享 SCLK 和 CS 線。資料從 Master 的 MOSI 輸出到第一個 Slave 的 MOSI，第一個 Slave 的 MISO 再連接到第二個 Slave 的 MOSI，以此類推。最後一個 Slave 的 MISO 才連接回 Master 的 MISO。資料像環一樣流過所有設備。</div></div></section><section><h2 class="text-3xl font-bold text-white mb-8">🕰️ SPI 操作模式 (Modes)</h2><p class="text-lg text-slate-300 leading-relaxed max-w-4xl mx-auto text-center mb-8">SPI 的四種操作模式是由<strong>時鐘極性 (CPOL)</strong> 和<strong>時鐘相位 (CPHA)</strong> 兩個參數搭配而成，用於定義主從設備之間的資料傳輸時序。這四種模式讓 SPI 能夠與不同時序要求的外設晶片相容通訊。<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6"><h3 class="text-2xl font-semibold text-sky-300 mb-3">CPOL (Clock Polarity)</h3><p class="text-slate-300"><strong>時鐘極性</strong>：定義 SPI 空閒時，時鐘訊號 SCLK 的電位狀態。<ul class="list-disc list-inside mt-2 space-y-1"><li><strong>CPOL = 0</strong>：空閒時為低電位<li><strong>CPOL = 1</strong>：空閒時為高電位</ul><p></div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl shadow-xl p-6"><h3 class="text-2xl font-semibold text-sky-300 mb-3">CPHA (Clock Phase)</h3><p class="text-slate-300"><strong>時鐘相位</strong>：定義 SPI 在 SCLK 第幾個邊緣取樣資料。<ul class="list-disc list-inside mt-2 space-y-1"><li><strong>CPHA = 0</strong>：在第一個邊緣取樣<li><strong>CPHA = 1</strong>：在第二個邊緣取樣</ul><p></div></div><h3 class="text-2xl font-semibold text-white mb-4 text-center">四種工作模式總覽</h3><div class="overflow-x-auto shadow-xl rounded-xl border border-gray-700/50 mb-8"><table class="w-full min-w-max text-left text-slate-300"><thead class="bg-gray-800/80 text-base text-sky-300 uppercase tracking-wider"><tr><th class="px-6 py-4 font-semibold">模式<th class="px-6 py-4 font-semibold">CPOL<th class="px-6 py-4 font-semibold">CPHA<th class="px-6 py-4 font-semibold">空閒電位<th class="px-6 py-4 font-semibold">取樣邊緣<tbody class="bg-gray-900/60 divide-y divide-gray-700/50"><tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium text-white">Mode 0<td class="px-6 py-4">0<td class="px-6 py-4">0<td class="px-6 py-4">低電位<td class="px-6 py-4 text-green-400">上升邊緣 (第一個邊緣)<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium text-white">Mode 1<td class="px-6 py-4">0<td class="px-6 py-4">1<td class="px-6 py-4">低電位<td class="px-6 py-4 text-red-400">下降邊緣 (第二個邊緣)<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium text-white">Mode 2<td class="px-6 py-4">1<td class="px-6 py-4">0<td class="px-6 py-4">高電位<td class="px-6 py-4 text-red-400">下降邊緣 (第一個邊緣)<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium text-white">Mode 3<td class="px-6 py-4">1<td class="px-6 py-4">1<td class="px-6 py-4">高電位<td class="px-6 py-4 text-green-400">上升邊緣 (第二個邊緣)</table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h4 class="text-xl font-semibold text-white mb-2">Mode 0 (CPOL=0, CPHA=0)</h4><p>空閒時時鐘為低電位，資料在時鐘的<strong>第一個邊緣（上升邊緣）</strong>被取樣。這是最常用的模式之一。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h4 class="text-xl font-semibold text-white mb-2">Mode 1 (CPOL=0, CPHA=1)</h4><p>空閒時時鐘為低電位，資料在時鐘的<strong>第二個邊緣（下降邊緣）</strong>被取樣。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h4 class="text-xl font-semibold text-white mb-2">Mode 2 (CPOL=1, CPHA=0)</h4><p>空閒時時鐘為高電位，資料在時鐘的<strong>第一個邊緣（下降邊緣）</strong>被取樣。</div><div class="bg-gray-900/60 backdrop-blur-sm border border-gray-700/50 rounded-xl p-5"><h4 class="text-xl font-semibold text-white mb-2">Mode 3 (CPOL=1, CPHA=1)</h4><p>空閒時時鐘為高電位，資料在時鐘的<strong>第二個邊緣（上升邊緣）</strong>被取樣。這也是最常用的模式之一。</div></div><div class="bg-sky-900/30 backdrop-blur-sm border border-sky-700/50 rounded-xl shadow-xl p-6"><h3 class="text-2xl font-semibold text-sky-300 mb-3">⚙️ 實際應用</h3><div class="text-slate-300 space-y-2"><p><strong>Mode 0</strong> 和 <strong>Mode 3</strong> 是應用最廣泛的兩種模式。例如 SD 卡的 SPI 介面或許多 Flash/FRAM 記憶體（如 FM25V05）都常使用這兩種模式。<p>在使用時，<strong>必須根據外設晶片的資料手冊 (DataSheet)</strong> 來確定其支援的 SPI 模式，並在主控端 (Master) 正確配置相應的 CPOL 和 CPHA 參數，以確保通訊的可靠性。</div></div></section><section><h2 class="text-3xl font-bold text-white mb-8">⚖️ SPI vs. I²C 協定比較</h2><div class="overflow-x-auto shadow-xl rounded-xl border border-gray-700/50"><table class="w-full min-w-max text-left text-slate-300"><thead class="bg-gray-800/80 text-base text-sky-300 uppercase tracking-wider"><tr><th class="px-6 py-4 font-semibold">特性<th class="px-6 py-4 font-semibold">SPI<th class="px-6 py-4 font-semibold">I²C (Inter-Integrated Circuit)<tbody class="bg-gray-900/60 divide-y divide-gray-700/50"><tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">訊號線數量<td class="px-6 py-4">4 條 (SCLK, MOSI, MISO, CS)。每個 Slave 需額外 1 條 CS 線。<td class="px-6 py-4">2 條 (SDA, SCL)。<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">通訊速度<td class="px-6 py-4">非常高。通常可達 10 MHz 至 100 MHz+。<td class="px-6 py-4">較低。標準 100 kHz, fast 400 kHz, 高速 3.4 MHz。<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">資料傳輸<td class="px-6 py-4"><strong>全雙工 (Full-Duplex)</strong>。可同時收發。<td class="px-6 py-4">半雙工 (Half-Duplex)。同一時間只能收或發。<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">裝置定址<td class="px-6 py-4">硬體定址。使用獨立的 CS 線選擇 Slave。<td class="px-6 py-4">軟體定址。使用 7-bit 或 10-bit 位址在匯流排上定址。<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">多主機支援<td class="px-6 py-4">困難，不常見。<td class="px-6 py-4">原生支援。包含匯流排仲裁機制。<tr class="hover:bg-gray-800/50 transition-colors"><td class="px-6 py-4 font-medium">確認機制<td class="px-6 py-4"><strong>無</strong>。協定層面沒有 ACK/NACK。<td class="px-6 py-4"><strong>有</strong>。每個位元組傳輸後都有 ACK/NACK。</table></div></section><section><h2 class="text-3xl font-bold text-white mb-8">📈 優點與挑戰 📉</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div class="bg-green-900/30 backdrop-blur-sm border border-green-700/50 rounded-xl shadow-xl p-6"><h3 class="text-2xl font-semibold text-green-300 mb-4">✅ 主要優勢</h3><ul class="list-disc list-inside space-y-2 text-slate-300"><li><strong>高速傳輸</strong>: 由於是同步協定且結構簡單，SPI 速率遠高於 I²C 或 UART。<li><strong>全雙工通訊</strong>: 資料可同時發送和接收，提高通訊效率。<li><strong>協定簡單</strong>: 沒有複雜的定址或仲裁機制，硬體實現簡單，軟體開銷低。<li><strong>硬體單純</strong>: 屬於邏輯電位 (Logic-Level) 通訊，<strong>不需額外的收發器 (Transceiver)</strong>（與 CAN 或 RS485 不同），可直接由晶片接腳對接。<li><strong>靈活的位元流</strong>: 不限制為 8-bit 資料，可以傳輸任意長度的位元流。</ul></div><div class="bg-red-900/30 backdrop-blur-sm border border-red-700/50 rounded-xl shadow-xl p-6"><h3 class="text-2xl font-semibold text-red-300 mb-4">⚠️ 主要挑戰</h3><ul class="list-disc list-inside space-y-2 text-slate-300"><li><strong>需要更多接腳</strong>: 基本 4 線，每增加一個 Slave 就需多一個 CS 接腳。<li><strong>沒有應答 (ACK)</strong>: Master 不知道 Slave 是否成功接收資料。<li><strong>沒有流量控制</strong>: Master 必須知道 Slave 的處理速度，否則可能導致資料遺失。<li><strong>電壓準位匹配</strong>: <strong>3.3V 晶片與 5V 晶片通常無法直接通訊</strong>。SPI 協定本身不定義電壓，需確保 Master 和 Slave 操作在相同的邏輯電壓。跨電壓通訊時，<strong>必須使用邏輯準位轉換器 (Level Shifter)</strong>。<li><strong>無標準規範</strong>: 雖然廣泛使用，但 SPI 沒有像 I²C 那樣的正式標準，不同廠商的實現可能有細微差異。</ul></div></div></section><section><h2 class="text-3xl font-bold text-white mb-6">🎯 結論</h2><p class="text-lg text-slate-300 leading-relaxed max-w-4xl mx-auto text-center"><strong>SPI</strong> 是一種高效、高速且實現簡單的通訊協定，使其成為嵌入式系統中連接微控制器與高效能周邊（特別是記憶體和感測器）的理想選擇。雖然它需要較多的接腳且缺乏 I²C 的內建定址與應答機制，但其<strong>全雙工</strong>能力和卓越的<strong>傳輸速率</strong>，使其在效能優先的應用場景中占有不可或缺的地位。</section></main><footer class="fixed bottom-0 left-0 right-0 bg-gray-900 text-gray-400 text-xs text-center p-4 border-t border-gray-700/50 shadow-inner"><a href="https://wellstsai.com"target="_blank"rel="noopener noreferrer"class="hover:text-sky-400 transition-colors">Generated by wellstsai.com </a><span class="mx-2">|</span> <span>撰寫日期：2025年11月11日</span></footer>