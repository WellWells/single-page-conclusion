<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta name="twitter:image" content="https://wellstsai.com/single-page-conclusion/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%BC%94%E9%80%B2-%E5%BE%9EGitflow%E5%88%B0%E4%B8%BB%E5%B9%B9%E9%96%8B%E7%99%BC%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90.png">
    <meta name="twitter:description" content="探討 Git 工作流從 Gitflow、GitHub Flow 到主幹開發（Trunk-based Development）的演進歷程。針對 web 服務與行動應用程式，分析如何透過自動化測試與功能旗標提升開發速度與 CI/CD 效率，並提供在地化團隊導入建議。">
    <meta name="twitter:title" content="Git工作流演進-從Gitflow到主幹開發的最佳實踐">
    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="WellWells">
    <meta property="og:image" content="https://wellstsai.com/single-page-conclusion/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%BC%94%E9%80%B2-%E5%BE%9EGitflow%E5%88%B0%E4%B8%BB%E5%B9%B9%E9%96%8B%E7%99%BC%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90.png">
    <meta property="og:url" content="https://wellstsai.com/single-page-conclusion/Git%E5%B7%A5%E4%BD%9C%E6%B5%81%E6%BC%94%E9%80%B2-%E5%BE%9EGitflow%E5%88%B0%E4%B8%BB%E5%B9%B9%E9%96%8B%E7%99%BC%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AF%A6%E8%B8%90.html">
    <meta property="og:description" content="探討 Git 工作流從 Gitflow、GitHub Flow 到主幹開發（Trunk-based Development）的演進歷程。針對 web 服務與行動應用程式，分析如何透過自動化測試與功能旗標提升開發速度與 CI/CD 效率，並提供在地化團隊導入建議。">
    <meta property="og:title" content="Git工作流演進-從Gitflow到主幹開發的最佳實踐">
    <meta name="description" content="探討 Git 工作流從 Gitflow、GitHub Flow 到主幹開發（Trunk-based Development）的演進歷程。針對 web 服務與行動應用程式，分析如何透過自動化測試與功能旗標提升開發速度與 CI/CD 效率，並提供在地化團隊導入建議。">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git 工作流程演進：GitFlow、GitHub Flow 與 Trunk-Based Development</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- KaTeX CDN -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }

        .comparison-table td,
        .comparison-table th {
            transition: all 0.2s ease;
        }

        .comparison-table tbody tr:hover {
            background-color: rgba(148, 163, 184, 0.1);
        }

        /* Git Flow Visualization Styles */
        .git-flow-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            padding: 2rem 1rem;
            overflow-x: auto;
        }

        .git-flow-svg {
            width: 100%;
            min-width: 600px;
            height: auto;
        }

        /* Branch Lines */
        .branch-line {
            fill: none;
            stroke-width: 3;
            stroke-linecap: round;
        }

        .branch-main {
            stroke: #60a5fa;
        }

        .branch-develop {
            stroke: #34d399;
        }

        .branch-feature {
            stroke: #a78bfa;
        }

        .branch-release {
            stroke: #fbbf24;
        }

        .branch-hotfix {
            stroke: #f87171;
        }

        /* Commit Dots */
        .commit-dot {
            r: 6;
            fill: currentColor;
            opacity: 0;
            animation: commitAppear 0.5s ease-out forwards;
        }

        @keyframes commitAppear {
            0% {
                opacity: 0;
                r: 0;
            }

            50% {
                r: 8;
            }

            100% {
                opacity: 1;
                r: 6;
            }
        }

        /* Merge Animations */
        .merge-arrow {
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            marker-end: url(#arrowhead);
            stroke-dasharray: 100;
            stroke-dashoffset: 100;
            animation: drawMerge 1s ease-out forwards;
        }

        @keyframes drawMerge {
            to {
                stroke-dashoffset: 0;
            }
        }

        /* Developer Icons */
        .developer-icon {
            opacity: 0;
            animation: developerAppear 0.6s ease-out forwards;
        }

        @keyframes developerAppear {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Branch Labels */
        .branch-label {
            font-size: 12px;
            font-weight: 600;
            fill: currentColor;
            opacity: 0.9;
        }

        /* Timeline */
        .timeline-marker {
            fill: #64748b;
            font-size: 11px;
            opacity: 0.7;
        }

        /* Pulse Animation for Active Work */
        .active-work {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                r: 6;
            }

            50% {
                opacity: 0.6;
                r: 8;
            }
        }

        /* Flow Path Animation */
        .flow-path {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawPath 3s ease-in-out forwards;
        }

        @keyframes drawPath {
            to {
                stroke-dashoffset: 0;
            }
        }

        /* Control Buttons */
        .animation-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .control-btn {
            padding: 0.5rem 1rem;
            background: rgba(148, 163, 184, 0.1);
            border: 1px solid rgba(148, 163, 184, 0.3);
            border-radius: 0.5rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.875rem;
        }

        .control-btn:hover {
            background: rgba(148, 163, 184, 0.2);
            border-color: rgba(148, 163, 184, 0.5);
            color: #cbd5e1;
        }

        .control-btn.active {
            background: rgba(96, 165, 250, 0.2);
            border-color: rgba(96, 165, 250, 0.5);
            color: #60a5fa;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .git-flow-container {
                padding: 1rem 0.5rem;
            }

            .git-flow-svg {
                min-width: 500px;
            }

            .branch-label {
                font-size: 10px;
            }

            .timeline-marker {
                font-size: 9px;
            }
        }

        @media (max-width: 480px) {
            .git-flow-svg {
                min-width: 400px;
            }

            .commit-dot {
                r: 4;
            }

            .branch-line {
                stroke-width: 2;
            }
        }

        /* Legend */
        .workflow-legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
            padding: 1rem;
            background: rgba(30, 41, 59, 0.3);
            border-radius: 0.5rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #cbd5e1;
        }

        .legend-line {
            width: 24px;
            height: 3px;
            border-radius: 2px;
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        /* Animation States */
        .paused * {
            animation-play-state: paused !important;
        }
    </style>
</head>

<body class="min-h-screen bg-gradient-to-b from-slate-800 to-slate-950 text-slate-300">

    <!-- Header -->
    <header class="text-center py-12 px-4">
        <h1 class="text-3xl md:text-4xl font-bold text-white">🔀 Git 工作流程演進：GitFlow、GitHub Flow 與 Trunk-Based
            Development</h1>
        <p class="mt-4 text-slate-400 max-w-3xl mx-auto">從版本發布到持續部署，探討三大主流 Git 工作流程如何因應不同開發模式而演化，以及如何為團隊選擇最適合的分支策略</p>
    </header>

    <!-- Summary Card -->
    <section class="max-w-4xl mx-auto px-4 mb-12">
        <div class="bg-slate-800/50 backdrop-blur border border-slate-700 rounded-xl p-6 shadow-lg">
            <h2 class="text-xl font-semibold text-white mb-4">📋 核心重點</h2>
            <ul class="space-y-2">
                <li>• <strong>GitFlow</strong> 適合需要支援多版本的傳統軟體（桌面應用、行動 App），但不適合持續部署的 Web 應用</li>
                <li>• <strong>GitHub Flow</strong> 簡化流程至單一主分支，適合快速迭代的 SaaS 產品與中小型團隊</li>
                <li>• <strong>Trunk-Based Development（TBD）</strong> 是高效能 DevOps 團隊的首選，需搭配完善的自動化測試與 Feature Flags</li>
                <li>• 工作流程演進反映了從「版本發布」到「持續交付」的產業轉型，並仰賴測試自動化與 CI/CD 工具的成熟</li>
                <li>• 多數團隊採用混合策略，根據團隊成熟度、產品特性與部署頻率調整工作流程</li>
            </ul>
        </div>
    </section>

    <!-- Content Sections -->
    <main class="max-w-4xl mx-auto px-4 space-y-12">

        <!-- Section: Why Git Workflows Matter -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🎯 為何需要 Git 工作流程？</h2>
            <p class="mb-4">Git
                本身設計極為彈性，幾乎可以用任何方式管理分支，但這種自由度對團隊合作反而造成困擾。因此，團隊開始建立<strong>慣例</strong>（Conventions）——一套共識性的工作方式，讓所有成員遵循相同流程。這使得程式碼審查更可預測、部署壓力更低、合作更順暢。
            </p>
            <p class="mb-4">但關鍵在於：<strong>適合的工作流程完全取決於產品類型與部署方式</strong>。</p>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="text-slate-200">💡 <strong>思考題</strong>：開發行動 App（使用者下載安裝，需同時支援多版本）與開發 Web
                    應用（每日多次部署至線上單一版本），兩者所需的分支策略會截然不同。</p>
            </div>
            <p>正因如此,不同工作流程因應不同場景而生——這也是我們將探討的三大主流模式。</p>
        </section>

        <!-- Section: Layer Cake Architecture -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🎂 TBD 的前置條件與分層架構</h2>
            <p class="mb-4">主幹開發並非孤立存在，而是建立在堅實的基礎設施之上，並支撐更高層次的持續交付與精益實驗。官方文件以「層蛋糕」（Layer Cake）比喻這種依賴關係：</p>

            <div class="bg-gradient-to-b from-slate-800/50 to-slate-800/30 border border-slate-700 rounded-lg p-6 my-6">
                <div class="space-y-4">
                    <div class="bg-purple-900/20 border-l-4 border-purple-500 p-4 rounded-r-lg">
                        <h3 class="font-semibold text-white mb-1">📊 Lean Experiments（精益實驗）</h3>
                        <p class="text-sm text-slate-300">持續改進實驗，專注於優化交付速度與品質</p>
                    </div>
                    <div class="text-center text-slate-500">↑ 建立於</div>
                    <div class="bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <h3 class="font-semibold text-white mb-1">🚀 Continuous Delivery（持續交付）</h3>
                        <p class="text-sm text-slate-300">確保程式碼隨時可發布至生產環境</p>
                    </div>
                    <div class="text-center text-slate-500">↑ 建立於</div>
                    <div class="bg-green-900/20 border-l-4 border-green-500 p-4 rounded-r-lg">
                        <h3 class="font-semibold text-white mb-1">🔄 Continuous Integration（持續整合）</h3>
                        <p class="text-sm text-slate-300">頻繁整合至共享程式碼主線並自動測試</p>
                    </div>
                    <div class="text-center text-slate-500">↑ 建立於</div>
                    <div class="bg-amber-900/20 border-l-4 border-amber-500 p-4 rounded-r-lg">
                        <h3 class="font-semibold text-white mb-1">🌳 Trunk-Based Development（主幹開發）</h3>
                        <p class="text-sm text-slate-300">純粹的版本控制工作流程——開發者的合作規範</p>
                    </div>
                    <div class="text-center text-slate-500">↑ 建立於</div>
                    <div class="bg-slate-700/30 border-l-4 border-slate-500 p-4 rounded-r-lg">
                        <h3 class="font-semibold text-white mb-1">🛠️ Solid Development Infrastructure（堅實的開發基礎設施）</h3>
                        <p class="text-sm text-slate-300">穩定的 VCS、開發者工作站、建置環境，現代 DevOps 時代通常採用 Infrastructure as Code
                        </p>
                    </div>
                </div>
            </div>

            <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-5 my-6">
                <p class="text-blue-200"><strong>💡 核心啟示</strong>：TBD 專注於<strong>版本控制工作流程</strong>，CI
                    則強調<strong>自動化測試與早期警告</strong>。兩者高度重疊但各有側重——TBD 定義開發者如何合作，CI 確保機器驗證每次變更的正確性。</p>
            </div>
        </section>

        <!-- Section: GitFlow -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">📦 GitFlow：結構化的版本管理</h2>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">核心概念</h3>
            <p class="mb-4">GitFlow 由 Vincent Driessen 於 2010 年提出，曾是業界標準分支模型。核心理念是維護<strong>多條長期分支</strong>（Long-lived
                Branches），各司其職：</p>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li><strong>main</strong>：生產環境就緒的程式碼</li>
                <li><strong>develop</strong>：開發中的整合程式碼（對應開發環境）</li>
                <li><strong>feature branches</strong>：每個新功能的專屬分支</li>
                <li><strong>release branches</strong>：準備發布的版本分支</li>
                <li><strong>hotfix branches</strong>：緊急修復生產環境問題的分支</li>
            </ul>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">實戰場景</h3>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="mb-3"><strong>情境</strong>：開發行動應用，使用者同時運行版本 2.3、2.4 與 3.0。產品經理要求：「需修復版本 2.3 的重大漏洞，但我們已在開發 3.0。」
                </p>
                <p><strong>GitFlow 解法</strong>：從 main 分支上版本 2.3 的標籤建立 hotfix 分支，修復後合併回 main 與 develop，確保修正同時進入當前版本與未來版本。
                </p>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">適用場景</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>✅ <strong>版本化發布</strong>的軟體（桌面應用、行動 App、企業內部署軟體）</li>
                <li>✅ 需<strong>同時維護多版本</strong>（如支援 2.x 與 3.x）</li>
                <li>✅ <strong>大型團隊</strong>需要明確的分支結構來防止混亂</li>
                <li>✅ <strong>受監管產業</strong>需要完整的變更追蹤與稽核</li>
            </ul>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">⚠️ 嚴重缺點</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>❌ <strong>拖慢開發部署週期</strong>：建立 release 分支、合併 hotfix、管理長期 feature 分支，造成大量管理開銷</li>
                <li>❌ <strong>無法配合持續交付</strong>：若每日部署，長期分支會導致頻繁的合併衝突</li>
                <li>❌ <strong>創始人親自否定</strong>：Vincent Driessen 後續在原始文章中補充：「若採用持續交付，應使用更簡單的工作流程」</li>
            </ul>

            <div class="bg-amber-900/20 border border-amber-700 rounded-lg p-5 my-6">
                <p class="text-amber-200">⚡ <strong>結論</strong>：GitFlow 為特定時代設計（版本發布、慢速部署週期），對現代 Web 應用而言過於繁重，已被視為不良實踐。
                </p>
            </div>

            <!-- GitFlow Visualization -->
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-6 my-8">
                <h3 class="text-xl font-semibold text-white mb-4 text-center">🎬 GitFlow 工作流程動畫</h3>
                <div class="git-flow-container" id="gitflow-animation">
                    <svg class="git-flow-svg" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                        <!-- Definitions -->
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                                <polygon points="0 0, 10 3, 0 6" fill="#94a3b8" />
                            </marker>
                        </defs>

                        <!-- Timeline -->
                        <text x="50" y="30" class="timeline-marker">週一</text>
                        <text x="250" y="30" class="timeline-marker">週三</text>
                        <text x="450" y="30" class="timeline-marker">週五</text>
                        <text x="650" y="30" class="timeline-marker">下週</text>

                        <!-- Main Branch -->
                        <g class="branch-main">
                            <path d="M 50 100 L 750 100" class="branch-line flow-path" style="animation-delay: 0s" />
                            <text x="20" y="105" class="branch-label" style="fill: #60a5fa">main</text>
                            <circle cx="50" cy="100" class="commit-dot" style="color: #60a5fa; animation-delay: 0.2s" />
                            <circle cx="700" cy="100" class="commit-dot" style="color: #60a5fa; animation-delay: 5s" />
                        </g>

                        <!-- Develop Branch -->
                        <g class="branch-develop">
                            <path d="M 100 150 L 700 150" class="branch-line flow-path" style="animation-delay: 0.3s" />
                            <text x="10" y="155" class="branch-label" style="fill: #34d399">develop</text>
                            <circle cx="100" cy="150" class="commit-dot"
                                style="color: #34d399; animation-delay: 0.5s" />
                            <circle cx="200" cy="150" class="commit-dot"
                                style="color: #34d399; animation-delay: 1.5s" />
                            <circle cx="400" cy="150" class="commit-dot" style="color: #34d399; animation-delay: 3s" />
                            <circle cx="600" cy="150" class="commit-dot"
                                style="color: #34d399; animation-delay: 4.5s" />
                        </g>

                        <!-- Feature Branch -->
                        <g class="branch-feature">
                            <path d="M 150 150 Q 180 180 200 200 L 350 200 Q 370 180 400 150"
                                class="branch-line flow-path" style="animation-delay: 0.8s" />
                            <text x="240" y="225" class="branch-label" style="fill: #a78bfa">feature/login</text>
                            <circle cx="200" cy="200" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.2s" />
                            <circle cx="275" cy="200" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.8s" />
                            <circle cx="350" cy="200" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 2.5s" />
                            <!-- Developer Icon -->
                            <text x="265" y="245" style="font-size: 20px; animation-delay: 1.2s"
                                class="developer-icon">👨‍💻</text>
                        </g>

                        <!-- Release Branch -->
                        <g class="branch-release">
                            <path d="M 450 150 Q 480 130 500 110 L 650 110 Q 670 115 700 100"
                                class="branch-line flow-path" style="animation-delay: 3.2s" />
                            <text x="540" y="95" class="branch-label" style="fill: #fbbf24">release/v2.0</text>
                            <circle cx="500" cy="110" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 3.5s" />
                            <circle cx="600" cy="110" class="commit-dot" style="color: #fbbf24; animation-delay: 4s" />
                        </g>

                        <!-- Hotfix Branch -->
                        <g class="branch-hotfix">
                            <path d="M 700 100 Q 720 80 730 70 L 750 70 Q 760 85 750 100" class="branch-line flow-path"
                                style="animation-delay: 5.2s" />
                            <text x="705" y="60" class="branch-label"
                                style="fill: #f87171; font-size: 11px">hotfix</text>
                            <circle cx="740" cy="70" class="commit-dot" style="color: #f87171; animation-delay: 5.5s" />
                        </g>

                        <!-- Merge Arrows -->
                        <path d="M 100 140 L 100 110" class="merge-arrow"
                            style="color: #34d399; animation-delay: 0.6s" />
                        <path d="M 390 160 L 390 200" class="merge-arrow" style="color: #a78bfa; animation-delay: 3s" />
                        <path d="M 690 110 L 690 100" class="merge-arrow"
                            style="color: #fbbf24; animation-delay: 4.8s" />
                        <path d="M 690 120 L 690 150" class="merge-arrow"
                            style="color: #fbbf24; animation-delay: 4.9s" />

                        <!-- Annotations -->
                        <text x="120" y="125" style="font-size: 10px; fill: #94a3b8; animation-delay: 0.7s"
                            class="developer-icon">從 main 分支</text>
                        <text x="410" y="175" style="font-size: 10px; fill: #94a3b8; animation-delay: 3.1s"
                            class="developer-icon">合併回 develop</text>
                    </svg>
                </div>

                <!-- Controls -->
                <div class="animation-controls">
                    <button class="control-btn" onclick="restartAnimation('gitflow-animation')">🔄 重播</button>
                    <button class="control-btn" onclick="togglePause('gitflow-animation')">⏸️ 暫停</button>
                </div>

                <!-- Legend -->
                <div class="workflow-legend">
                    <div class="legend-item">
                        <div class="legend-line" style="background: #60a5fa"></div>
                        <span>main（生產環境）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line" style="background: #34d399"></div>
                        <span>develop（開發整合）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line" style="background: #a78bfa"></div>
                        <span>feature（新功能）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line" style="background: #fbbf24"></div>
                        <span>release（發布準備）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line" style="background: #f87171"></div>
                        <span>hotfix（緊急修復）</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: GitHub Flow -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">⚡ GitHub Flow：極簡主義者的選擇</h2>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">核心原則</h3>
            <p class="mb-4">GitHub Flow 的核心僅一條規則：<strong>main 分支永遠可部署</strong>（Always Deployable）。</p>
            <p class="mb-4">工作流程極為簡潔：</p>
            <ol class="list-decimal list-inside space-y-2 mb-4 ml-4">
                <li>從 main 建立分支</li>
                <li>進行變更</li>
                <li>開啟 Pull Request（PR）</li>
                <li>經審查後合併回 main</li>
                <li>立即部署</li>
            </ol>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">實戰場景</h3>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="mb-3"><strong>情境</strong>：週二早上，發現使用者無法上傳大頭貼。</p>
                <p><strong>GitHub Flow 解法</strong>：建立分支 <code
                        class="bg-slate-700 px-2 py-1 rounded">fix-profile-upload</code> → 修復 → 喝咖啡時完成審查 → 合併至 main →
                    午餐前修正已上線。</p>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">適用場景</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>✅ <strong>持續部署的 Web 應用</strong>（SaaS 產品、API、Web 服務）——線上僅一個版本</li>
                <li>✅ <strong>中小型快速迭代團隊</strong>，不需 GitFlow 的複雜結構</li>
                <li>✅ 已建立<strong>完善的自動化測試與 CI/CD</strong>——因 main 永遠可部署，需信任測試能捕捉問題</li>
                <li>✅ 專注於<strong>快速交付功能</strong>而非管理分支</li>
            </ul>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">⚠️ 挑戰</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>❌ <strong>無法處理多版本</strong>：所有變更直接進入生產環境</li>
                <li>❌ <strong>要求團隊紀律</strong>：若有人合併有問題的程式碼，整個部署管線停擺</li>
                <li>❌ <strong>多團隊合作困難</strong>：容易互相干擾，需加強協調</li>
            </ul>

            <div class="bg-blue-900/20 border border-blue-700 rounded-lg p-5 my-6">
                <p class="text-blue-200">💡 <strong>真相</strong>：GitHub Flow 假設團隊已有良好習慣且同步運作。若團隊將 PR
                    當成可選建議、將測試當成忘記寫的作業，將面臨嚴重問題。但若運作順暢，效率極高——這就是為何許多團隊採用它。</p>
            </div>

            <!-- GitHub Flow Visualization -->
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-6 my-8">
                <h3 class="text-xl font-semibold text-white mb-4 text-center">🎬 GitHub Flow 工作流程動畫</h3>
                <div class="git-flow-container" id="githubflow-animation">
                    <svg class="git-flow-svg" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
                        <!-- Timeline -->
                        <text x="50" y="30" class="timeline-marker">10:00</text>
                        <text x="250" y="30" class="timeline-marker">10:30</text>
                        <text x="450" y="30" class="timeline-marker">11:00</text>
                        <text x="650" y="30" class="timeline-marker">11:30</text>

                        <!-- Main Branch (Always Deployable) -->
                        <g class="branch-main">
                            <path d="M 50 120 L 750 120" class="branch-line flow-path"
                                style="animation-delay: 0s; stroke-width: 4" />
                            <text x="15" y="125" class="branch-label" style="fill: #60a5fa; font-size: 14px">main</text>
                            <circle cx="50" cy="120" class="commit-dot" style="color: #60a5fa; animation-delay: 0.2s" />
                            <circle cx="250" cy="120" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 2.5s" />
                            <circle cx="550" cy="120" class="commit-dot" style="color: #60a5fa; animation-delay: 5s" />
                            <circle cx="750" cy="120" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 6.5s" />

                            <!-- Deploy Indicators -->
                            <text x="240" y="95" style="font-size: 16px; animation-delay: 2.6s"
                                class="developer-icon">🚀</text>
                            <text x="540" y="95" style="font-size: 16px; animation-delay: 5.1s"
                                class="developer-icon">🚀</text>
                        </g>

                        <!-- Feature Branch 1 -->
                        <g class="branch-feature">
                            <path d="M 100 120 Q 120 140 130 160 L 220 160 Q 235 140 250 120"
                                class="branch-line flow-path" style="animation-delay: 0.5s" />
                            <text x="135" y="185" class="branch-label"
                                style="fill: #a78bfa; font-size: 11px">fix-profile-upload</text>
                            <circle cx="130" cy="160" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 0.8s" />
                            <circle cx="175" cy="160" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.3s" />
                            <circle cx="220" cy="160" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.8s" />

                            <!-- PR Review -->
                            <text x="160" y="205" style="font-size: 12px; fill: #a78bfa; animation-delay: 2s"
                                class="developer-icon">📝 PR Review</text>
                            <text x="125" y="145" style="font-size: 18px; animation-delay: 0.8s"
                                class="developer-icon">👨‍💻</text>
                        </g>

                        <!-- Feature Branch 2 -->
                        <g style="color: #8b5cf6">
                            <path d="M 400 120 Q 420 145 430 170 L 520 170 Q 535 145 550 120"
                                class="branch-line flow-path" style="stroke: #8b5cf6; animation-delay: 3s" />
                            <text x="440" y="195" class="branch-label"
                                style="fill: #8b5cf6; font-size: 11px">feature-checkout</text>
                            <circle cx="430" cy="170" class="commit-dot"
                                style="color: #8b5cf6; animation-delay: 3.3s" />
                            <circle cx="475" cy="170" class="commit-dot"
                                style="color: #8b5cf6; animation-delay: 3.8s" />
                            <circle cx="520" cy="170" class="commit-dot"
                                style="color: #8b5cf6; animation-delay: 4.3s" />
                            <text x="425" y="155" style="font-size: 18px; animation-delay: 3.3s"
                                class="developer-icon">👩‍💻</text>
                        </g>

                        <!-- Merge Arrows with CI/CD -->
                        <path d="M 240 130 L 240 160" class="merge-arrow"
                            style="color: #a78bfa; animation-delay: 2.3s" />
                        <text x="195" y="142" style="font-size: 10px; fill: #10b981; animation-delay: 2.2s"
                            class="developer-icon">✓ CI Pass</text>

                        <path d="M 540 130 L 540 170" class="merge-arrow"
                            style="color: #8b5cf6; animation-delay: 4.8s" />
                        <text x="495" y="142" style="font-size: 10px; fill: #10b981; animation-delay: 4.7s"
                            class="developer-icon">✓ Tests OK</text>

                        <!-- Annotations -->
                        <text x="260" y="110" style="font-size: 11px; fill: #94a3b8; animation-delay: 2.7s"
                            class="developer-icon">合併後立即部署</text>
                        <rect x="680" y="50" width="90" height="30" rx="5" fill="rgba(16, 185, 129, 0.1)"
                            stroke="#10b981" stroke-width="1" style="animation-delay: 6.6s" class="developer-icon" />
                        <text x="690" y="70" style="font-size: 11px; fill: #10b981; animation-delay: 6.7s"
                            class="developer-icon">Production</text>
                    </svg>
                </div>

                <!-- Controls -->
                <div class="animation-controls">
                    <button class="control-btn" onclick="restartAnimation('githubflow-animation')">🔄 重播</button>
                    <button class="control-btn" onclick="togglePause('githubflow-animation')">⏸️ 暫停</button>
                </div>

                <!-- Legend -->
                <div class="workflow-legend">
                    <div class="legend-item">
                        <div class="legend-line" style="background: #60a5fa"></div>
                        <span>main（永遠可部署）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line" style="background: #a78bfa"></div>
                        <span>短期 feature 分支</span>
                    </div>
                    <div class="legend-item">
                        <span>🚀</span>
                        <span>自動部署</span>
                    </div>
                    <div class="legend-item">
                        <span>📝</span>
                        <span>Pull Request 審查</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section: Trunk-Based Development -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🚀 Trunk-Based Development：全力投入持續整合</h2>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">核心理念</h3>
            <p class="mb-4">Trunk-Based Development（TBD）是高效能 DevOps
                團隊日益採用的最佳實踐。開發者在一個稱為「主幹」（trunk/main）的分支上共同合作，透過規範化的技術手段，抵抗建立長期開發分支的誘惑。</p>
            <p class="mb-4">根據團隊規模，有兩種模式：</p>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li><strong>小型團隊</strong>：直接提交至 main</li>
                <li><strong>規模化團隊</strong>：使用<strong>短期分支</strong>（生命週期 < 1 天，且必須是單一工作站的產物——無論是單人開發、結對編程或 Mob
                        Programming）</li>
            </ul>
            <p class="mb-4">核心原則：<strong>持續整合</strong>（Continuous Integration）——所有開發者每 24 小時至少向主幹提交一次，確保程式碼隨時可部署。</p>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">🏛️ 歷史背景與規模驗證</h3>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="mb-3"><strong>TBD 並非新潮流</strong>，而是經過數十年驗證的成熟實踐：</p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li><strong>1980 年代</strong>：開始被戰術性考慮</li>
                    <li><strong>1990 年代中期</strong>：成為已知的分支模型選擇</li>
                    <li><strong>現今</strong>：Google、Facebook 等大型組織在超大規模下採用</li>
                </ul>
                <p class="mt-4 text-blue-200"><strong>💡 規模驗證</strong>：Google 擁有 <strong>35,000 名開發者與 QA
                        自動化測試人員</strong>在單一 monorepo 的主幹中合作，證明 TBD 可隨團隊規模彈性擴展而不影響生產力或品質。</p>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">實戰場景</h3>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="mb-3"><strong>情境</strong>：三位開發者同時開發結帳功能不同部分，每天多次提交至 main。</p>
                <p class="mb-3"><strong>疑問</strong>：提交進行中的程式碼至 main？如何避免使用者看到半成品？</p>
                <p class="mb-3"><strong>解答</strong>：使用 <strong>Feature Flags</strong>（功能開關）。程式碼持續部署至生產環境，但功能對使用者隱藏。</p>
                <ul class="list-disc list-inside space-y-2 ml-4 mt-3">
                    <li>週一至週四：持續提交小型變更 → 自動化測試檢查 → 部署至生產（但功能關閉）</li>
                    <li>週五：開發完成 → 切換 Feature Flag → 新結帳功能上線</li>
                </ul>
                <p class="mt-3"><strong>效果</strong>：零合併衝突（因持續整合）、快速回饋循環（每次提交立即執行測試）</p>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">🔧 關鍵技術：Branch by Abstraction</h3>
            <p class="mb-4">除了 Feature Flags，TBD 團隊還依賴 <strong>Branch by Abstraction</strong>（抽象分支）技術來處理大規模重構或架構變更：</p>
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="mb-3"><strong>情境</strong>：需要將舊的支付系統替換為新系統，但無法在一次提交中完成。</p>
                <p class="mb-3"><strong>傳統做法</strong>：建立長期 feature 分支，數週後合併——面臨巨大的合併衝突風險。</p>
                <p class="mb-3"><strong>Branch by Abstraction 做法</strong>：</p>
                <ol class="list-decimal list-inside space-y-2 ml-4">
                    <li>引入抽象層（介面）覆蓋舊系統</li>
                    <li>逐步在主幹上提交新實作（但不啟用）</li>
                    <li>使用 Feature Flag 切換新舊實作</li>
                    <li>驗證穩定後移除舊實作與抽象層</li>
                </ol>
                <p class="mt-3"><strong>效果</strong>：所有變更持續整合至主幹，無長期分支，無合併地獄。</p>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">📦 Release 策略：兩種模式</h3>
            <div class="space-y-4">
                <div class="bg-slate-800/30 border-l-4 border-blue-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-white mb-2">模式 1：即時切分 Release 分支</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>從主幹切出 release 分支（Just-in-Time）</li>
                        <li>進行「固化」（hardening）——僅修復 Bug，不加入新功能</li>
                        <li>發布後刪除該分支</li>
                        <li>適合需要穩定發布週期的團隊</li>
                    </ul>
                </div>
                <div class="bg-slate-800/30 border-l-4 border-green-500 p-5 rounded-r-lg">
                    <h4 class="font-semibold text-white mb-2">模式 2：直接從主幹發布（Fix Forward）</h4>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li>主幹永遠可部署，直接發布</li>
                        <li>Bug 修復採用「立即修正」（Fix Forward）策略——向前推進新版本而非回退補丁</li>
                        <li>不建立 release 分支</li>
                        <li>適合高吞吐量、快速迭代的團隊</li>
                    </ul>
                </div>
            </div>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">適用場景</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>✅ <strong>經驗豐富且紀律嚴明的團隊</strong>（不限資深，但需良好合作與程式碼品質意識）</li>
                <li>✅ <strong>堅若磐石的自動化測試</strong>——這是不可妥協的前提。持續部署至生產環境，測試必須涵蓋所有關鍵路徑</li>
                <li>✅ <strong>追求快速整合與部署</strong>——DORA Metrics 研究顯示，TBD 團隊部署頻率更高、故障恢復更快</li>
                <li>✅ <strong>SaaS 產品</strong>——僅維護單一生產版本</li>
            </ul>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">⚠️ 關鍵挑戰</h3>
            <ul class="list-disc list-inside space-y-2 mb-4 ml-4">
                <li>❌ <strong>新手易誤觸生產環境</strong>：若測試覆蓋率不足，直接提交至 main 極度危險</li>
                <li>❌ <strong>測試覆蓋率薄弱時絕對混亂</strong>：但這反而立即暴露弱點，迫使團隊正視測試重要性</li>
                <li>❌ <strong>需要文化轉型</strong>：開發者需學習小步提交、使用 Feature Flags、理解 CI/CD——不只是技術改變,更是思維轉變</li>
                <li>❌ <strong>要求「預整合建置」紀律</strong>：每位開發者提交前必須在本地完成完整建置（編譯、單元測試、整合測試）</li>
            </ul>

            <div class="bg-green-900/20 border border-green-700 rounded-lg p-5 my-6">
                <p class="text-green-200 mb-3">🎯 <strong>真相</strong>：TBD
                    起初讓人感覺魯莽，但它實際上<strong>迫使團隊建立本就該有的自動化測試</strong>。就像拆掉輔助輪——一開始可怕，但一旦掌握就再也回不去了。</p>
                <p class="text-green-200">高效能團隊多數認為：TBD 是唯一選擇，若做對了，不會尋找替代方案。</p>
            </div>

            <!-- Trunk-Based Development Visualization -->
            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-6 my-8">
                <h3 class="text-xl font-semibold text-white mb-4 text-center">🎬 Trunk-Based Development 工作流程動畫</h3>
                <p class="text-center text-slate-400 mb-6 text-sm">觀察三位開發者如何同時在主幹上合作，並使用 Feature Flags 控制功能發布</p>
                <div class="git-flow-container" id="tbd-animation">
                    <svg class="git-flow-svg" viewBox="0 0 900 350" xmlns="http://www.w3.org/2000/svg">
                        <!-- Timeline -->
                        <text x="60" y="30" class="timeline-marker">週一早上</text>
                        <text x="250" y="30" class="timeline-marker">週二</text>
                        <text x="450" y="30" class="timeline-marker">週三</text>
                        <text x="650" y="30" class="timeline-marker">週四</text>
                        <text x="820" y="30" class="timeline-marker">週五</text>

                        <!-- Main Trunk (thick, prominent) -->
                        <g class="branch-main">
                            <path d="M 50 150 L 870 150" class="branch-line flow-path"
                                style="animation-delay: 0s; stroke-width: 5" />
                            <text x="10" y="158" class="branch-label"
                                style="fill: #60a5fa; font-size: 16px; font-weight: 700">trunk</text>

                            <!-- Continuous commits from multiple developers -->
                            <!-- Developer 1 commits -->
                            <circle cx="100" cy="150" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 0.3s" />
                            <circle cx="180" cy="150" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 0.8s" />
                            <circle cx="260" cy="150" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.3s" />
                            <circle cx="340" cy="150" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 1.8s" />
                            <circle cx="420" cy="150" class="commit-dot"
                                style="color: #a78bfa; animation-delay: 2.3s" />

                            <!-- Developer 2 commits -->
                            <circle cx="140" cy="150" class="commit-dot"
                                style="color: #10b981; animation-delay: 0.5s" />
                            <circle cx="220" cy="150" class="commit-dot" style="color: #10b981; animation-delay: 1s" />
                            <circle cx="300" cy="150" class="commit-dot"
                                style="color: #10b981; animation-delay: 1.5s" />
                            <circle cx="380" cy="150" class="commit-dot" style="color: #10b981; animation-delay: 2s" />
                            <circle cx="460" cy="150" class="commit-dot"
                                style="color: #10b981; animation-delay: 2.5s" />

                            <!-- Developer 3 commits -->
                            <circle cx="160" cy="150" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 0.7s" />
                            <circle cx="240" cy="150" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 1.2s" />
                            <circle cx="320" cy="150" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 1.7s" />
                            <circle cx="400" cy="150" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 2.2s" />
                            <circle cx="480" cy="150" class="commit-dot"
                                style="color: #fbbf24; animation-delay: 2.7s" />

                            <!-- Integration commits -->
                            <circle cx="540" cy="150" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 3.2s" />
                            <circle cx="620" cy="150" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 3.7s" />
                            <circle cx="700" cy="150" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 4.2s" />
                            <circle cx="780" cy="150" class="commit-dot"
                                style="color: #60a5fa; animation-delay: 4.7s" />
                            <circle cx="860" cy="150" class="commit-dot active-work"
                                style="color: #10b981; animation-delay: 5.2s" />
                        </g>

                        <!-- Developer Labels -->
                        <g>
                            <text x="90" y="110" style="font-size: 14px; animation-delay: 0.3s"
                                class="developer-icon">👨‍💻</text>
                            <text x="85" y="95" style="font-size: 10px; fill: #a78bfa; animation-delay: 0.4s"
                                class="developer-icon">Alice</text>

                            <text x="130" y="195" style="font-size: 14px; animation-delay: 0.5s"
                                class="developer-icon">👩‍💻</text>
                            <text x="127" y="210" style="font-size: 10px; fill: #10b981; animation-delay: 0.6s"
                                class="developer-icon">Bob</text>

                            <text x="150" y="110" style="font-size: 14px; animation-delay: 0.7s"
                                class="developer-icon">🧑‍💻</text>
                            <text x="142" y="95" style="font-size: 10px; fill: #fbbf24; animation-delay: 0.8s"
                                class="developer-icon">Charlie</text>
                        </g>

                        <!-- Optional: Very short-lived branch (< 1 day) -->
                        <g style="color: #94a3b8; opacity: 0.6">
                            <path d="M 500 150 Q 510 165 520 175 L 560 175 Q 570 165 580 150" class="branch-line"
                                style="stroke: #94a3b8; stroke-width: 2; stroke-dasharray: 5,5; animation-delay: 3s" />
                            <text x="515" y="195" style="font-size: 9px; fill: #94a3b8; animation-delay: 3.1s"
                                class="developer-icon">&lt; 1天極短分支</text>
                            <circle cx="540" cy="175" class="commit-dot"
                                style="color: #94a3b8; animation-delay: 3.3s; r: 4" />
                            <path d="M 570 160 L 570 175" class="merge-arrow"
                                style="color: #94a3b8; stroke-width: 1; animation-delay: 3.6s" />
                        </g>

                        <!-- CI/CD Indicators -->
                        <g>
                            <rect x="95" y="165" width="35" height="12" rx="3" fill="rgba(16, 185, 129, 0.15)"
                                stroke="#10b981" stroke-width="0.5" style="animation-delay: 0.4s"
                                class="developer-icon" />
                            <text x="98" y="174" style="font-size: 8px; fill: #10b981; animation-delay: 0.4s"
                                class="developer-icon">CI✓</text>

                            <rect x="215" y="165" width="35" height="12" rx="3" fill="rgba(16, 185, 129, 0.15)"
                                stroke="#10b981" stroke-width="0.5" style="animation-delay: 1.1s"
                                class="developer-icon" />
                            <text x="218" y="174" style="font-size: 8px; fill: #10b981; animation-delay: 1.1s"
                                class="developer-icon">CI✓</text>

                            <rect x="375" y="165" width="35" height="12" rx="3" fill="rgba(16, 185, 129, 0.15)"
                                stroke="#10b981" stroke-width="0.5" style="animation-delay: 2.1s"
                                class="developer-icon" />
                            <text x="378" y="174" style="font-size: 8px; fill: #10b981; animation-delay: 2.1s"
                                class="developer-icon">CI✓</text>
                        </g>

                        <!-- Feature Flag -->
                        <g>
                            <rect x="650" y="50" width="180" height="60" rx="8" fill="rgba(168, 85, 247, 0.1)"
                                stroke="#a855f7" stroke-width="2"
                                style="animation-delay: 4s; stroke-dasharray: 300; stroke-dashoffset: 300; animation: drawMerge 1s ease-out forwards; animation-delay: 4s"
                                class="developer-icon" />
                            <text x="665" y="72"
                                style="font-size: 12px; fill: #a855f7; font-weight: 600; animation-delay: 4.2s"
                                class="developer-icon">🚩 Feature Flag</text>
                            <text x="665" y="88" style="font-size: 9px; fill: #c084fc; animation-delay: 4.3s"
                                class="developer-icon">checkout_v2: false</text>
                            <text x="665" y="100" style="font-size: 9px; fill: #86efac; animation-delay: 5s"
                                class="developer-icon">週五啟用 → true ✓</text>
                        </g>

                        <!-- Deploy Indicators -->
                        <g>
                            <text x="180" y="130" style="font-size: 12px; animation-delay: 0.9s"
                                class="developer-icon">🚀</text>
                            <text x="340" y="130" style="font-size: 12px; animation-delay: 1.9s"
                                class="developer-icon">🚀</text>
                            <text x="540" y="130" style="font-size: 12px; animation-delay: 3.3s"
                                class="developer-icon">🚀</text>
                            <text x="780" y="130" style="font-size: 12px; animation-delay: 4.8s"
                                class="developer-icon">🚀</text>
                            <text x="860" y="130" style="font-size: 14px; animation-delay: 5.3s"
                                class="developer-icon">🎉</text>
                        </g>

                        <!-- Production Environment -->
                        <rect x="720" y="250" width="140" height="50" rx="8" fill="rgba(16, 185, 129, 0.1)"
                            stroke="#10b981" stroke-width="2" style="animation-delay: 5.4s" class="developer-icon" />
                        <text x="750" y="273" style="font-size: 14px; fill: #10b981; animation-delay: 5.5s"
                            class="developer-icon">Production</text>
                        <text x="735" y="290" style="font-size: 10px; fill: #6ee7b7; animation-delay: 5.6s"
                            class="developer-icon">持續部署中...</text>

                        <!-- Timeline Annotations -->
                        <text x="100" y="235" style="font-size: 10px; fill: #94a3b8; animation-delay: 0.9s"
                            class="developer-icon">每天多次提交</text>
                        <text x="620" y="235" style="font-size: 10px; fill: #a855f7; animation-delay: 4.3s"
                            class="developer-icon">功能完成但對用戶隱藏</text>
                    </svg>
                </div>

                <!-- Controls -->
                <div class="animation-controls">
                    <button class="control-btn" onclick="restartAnimation('tbd-animation')">🔄 重播</button>
                    <button class="control-btn" onclick="togglePause('tbd-animation')">⏸️ 暫停</button>
                </div>

                <!-- Legend -->
                <div class="workflow-legend">
                    <div class="legend-item">
                        <div class="legend-line" style="background: #60a5fa; height: 4px"></div>
                        <span>trunk/main（唯一真理來源）</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #a78bfa"></div>
                        <span>Alice 的提交</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #10b981"></div>
                        <span>Bob 的提交</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-dot" style="background: #fbbf24"></div>
                        <span>Charlie 的提交</span>
                    </div>
                    <div class="legend-item">
                        <span>🚩</span>
                        <span>Feature Flag 控制</span>
                    </div>
                    <div class="legend-item">
                        <span>🚀</span>
                        <span>自動部署至生產環境</span>
                    </div>
                </div>

                <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-4 mt-6">
                    <p class="text-purple-200 text-sm">
                        <strong>💡 關鍵觀察</strong>：注意三位開發者如何在同一主幹上密集合作，每次提交都觸發 CI 檢查並自動部署。功能雖已在生產環境，但透過 Feature Flag
                        對使用者隱藏，直到週五才正式啟用。這就是 TBD 的精髓——<strong>程式碼整合與功能發布解耦</strong>。
                    </p>
                </div>
            </div>
        </section>

        <!-- Section: Comparison Table -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">📊 三大工作流程比較</h2>
            <div class="overflow-x-auto">
                <table
                    class="comparison-table w-full border-collapse bg-slate-800/30 border border-slate-700 rounded-lg">
                    <thead>
                        <tr class="bg-slate-700/50">
                            <th class="border border-slate-600 px-4 py-3 text-left text-white">特性</th>
                            <th class="border border-slate-600 px-4 py-3 text-left text-white">GitFlow</th>
                            <th class="border border-slate-600 px-4 py-3 text-left text-white">GitHub Flow</th>
                            <th class="border border-slate-600 px-4 py-3 text-left text-white">Trunk-Based Development
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">分支策略</td>
                            <td class="border border-slate-600 px-4 py-3">多條長期分支（main、develop、feature、release、hotfix）
                            </td>
                            <td class="border border-slate-600 px-4 py-3">單一 main + 短期 feature 分支</td>
                            <td class="border border-slate-600 px-4 py-3">直接提交至 main 或極短期分支（< 1 天）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">適用產品</td>
                            <td class="border border-slate-600 px-4 py-3">版本化軟體（桌面 App、行動 App）</td>
                            <td class="border border-slate-600 px-4 py-3">持續部署的 Web 應用（SaaS、API）</td>
                            <td class="border border-slate-600 px-4 py-3">高頻部署的 SaaS 產品</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">部署頻率</td>
                            <td class="border border-slate-600 px-4 py-3">低（版本發布週期）</td>
                            <td class="border border-slate-600 px-4 py-3">中高（每日數次）</td>
                            <td class="border border-slate-600 px-4 py-3">極高（每日多次至數十次）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">多版本支援</td>
                            <td class="border border-slate-600 px-4 py-3">✅ 優秀</td>
                            <td class="border border-slate-600 px-4 py-3">❌ 不支援</td>
                            <td class="border border-slate-600 px-4 py-3">❌ 不支援</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">測試要求</td>
                            <td class="border border-slate-600 px-4 py-3">中等（發布前測試）</td>
                            <td class="border border-slate-600 px-4 py-3">高（CI/CD 自動化）</td>
                            <td class="border border-slate-600 px-4 py-3">極高（全面自動化，涵蓋率需達標）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">合併衝突</td>
                            <td class="border border-slate-600 px-4 py-3">頻繁（長期分支分化）</td>
                            <td class="border border-slate-600 px-4 py-3">偶爾（短期分支）</td>
                            <td class="border border-slate-600 px-4 py-3">極少（持續整合）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">團隊規模</td>
                            <td class="border border-slate-600 px-4 py-3">大型（需明確結構）</td>
                            <td class="border border-slate-600 px-4 py-3">中小型（快速迭代）</td>
                            <td class="border border-slate-600 px-4 py-3">中型（高紀律團隊）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">關鍵技術</td>
                            <td class="border border-slate-600 px-4 py-3">分支管理、版本標籤</td>
                            <td class="border border-slate-600 px-4 py-3">Pull Request、CI/CD</td>
                            <td class="border border-slate-600 px-4 py-3">Feature Flags、Branch by
                                Abstraction、持續整合、全面自動化測試</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">Release 策略</td>
                            <td class="border border-slate-600 px-4 py-3">從 main 建立長期 release 分支</td>
                            <td class="border border-slate-600 px-4 py-3">從 main 合併後直接部署</td>
                            <td class="border border-slate-600 px-4 py-3">即時切分 release 分支並 hardening，或直接從主幹發布（Fix
                                Forward）</td>
                        </tr>
                        <tr>
                            <td class="border border-slate-600 px-4 py-3 font-semibold">現況</td>
                            <td class="border border-slate-600 px-4 py-3">⚠️ 已被視為不良實踐（除非特殊場景）</td>
                            <td class="border border-slate-600 px-4 py-3">✅ 廣泛使用</td>
                            <td class="border border-slate-600 px-4 py-3">🚀 高效能團隊首選</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Section: Evolution -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🔄 工作流程為何如此演進？</h2>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">2010 年：GitFlow 的時代</h3>
            <p class="mb-4">當時軟體以<strong>版本</strong>方式發布——先推出 1.0，花數月開發 2.0 再發布。部署過程風險高、手動操作、頻率低。這是 DevOps 普及前的時代。</p>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">產業轉型：SaaS 與持續交付崛起</h3>
            <p class="mb-4">Amazon、Netflix、Spotify 等公司開始<strong>每日多次部署至生產環境</strong>。他們不再發布「版本」,而是持續交付「功能」。GitFlow
                的長期分支與合併開銷完全跟不上這種速度。</p>
            <p class="mb-4">於是團隊簡化流程，GitHub Flow 應運而生——更快、更精簡的選擇。</p>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">極致追求：Trunk-Based Development</h3>
            <p class="mb-4">但 GitHub Flow 仍有瓶頸：Pull Request 可能阻塞流程、分支存活過久。團隊追求<strong>更高速度</strong>，TBD 登場——直接提交至 main
                或極短期分支，實現真正的持續整合。</p>

            <div class="bg-slate-800/30 border border-slate-700 rounded-lg p-5 my-6">
                <p class="text-slate-200 mb-3">🔧 <strong>技術生態進步是關鍵</strong></p>
                <p class="mb-3">這種演進並非憑空發生,而是因為底層技術成熟：</p>
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li>2010 年：自動化測試尚未成熟、CI/CD 建置困難、Feature Flags 不存在</li>
                    <li>現今：完善的測試框架、成熟的 CI/CD 工具（GitHub Actions、GitLab CI）、Feature Flags 服務（LaunchDarkly、Unleash）</li>
                </ul>
                <p class="mt-3">工作流程演進不只是分支策略改變,而是<strong>整個工具與實踐生態的進化</strong>。</p>
            </div>
        </section>

        <!-- Section: Real-World Hybrids -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🛠️ 實務混合策略</h2>
            <p class="mb-4">理論與實務往往有落差。多數團隊並非嚴格遵循某一工作流程，而是根據需求調整。</p>

            <h3 class="text-xl font-semibold text-white mb-3 mt-6">常見混合模式</h3>
            <ul class="list-disc list-inside space-y-3 mb-4 ml-4">
                <li><strong>TBD + Release Branches</strong>：持續提交至 main，但發布時建立 release 分支以確保穩定性——適合尚未完全準備好 TBD 但想逐步採用的團隊
                </li>
                <li><strong>TBD + 外部團隊 PR 機制</strong>：核心團隊採用 TBD（互信且測試完善），外部合作團隊必須經 PR 審查——降低非核心貢獻者誤觸生產環境的風險。這正是 Google
                    的做法：35,000 名開發者在主幹合作，但外部貢獻需要審查</li>
                <li><strong>GitHub Flow + Feature Flags</strong>：保留 PR 流程，但使用 Feature Flags 加速功能交付</li>
                <li><strong>TBD + Fix Forward</strong>：高吞吐量團隊採用——主幹永遠可部署，Bug 修復不建立 hotfix 分支，而是立即在主幹修正並推進新版本</li>
            </ul>

            <div class="bg-purple-900/20 border border-purple-700 rounded-lg p-5 my-6">
                <p class="text-purple-200">💡 <strong>啟示</strong>：沒有「一體適用」的答案。根據團隊結構、產品成熟度、合作模式調整工作流程,是務實且正確的做法。</p>
            </div>
        </section>

        <!-- Section: Practical Tips -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">✅ 實踐建議</h2>

            <div class="space-y-4">
                <div class="bg-slate-800/30 border-l-4 border-blue-500 p-5 rounded-r-lg">
                    <h3 class="font-semibold text-white mb-2">1️⃣ 自動化一切</h3>
                    <p>無論選擇哪種工作流程,自動化是基礎：自動化測試、CI/CD、程式碼檢查（Linting）、格式化、安全掃描。工具豐富且易用，沒有理由不做。</p>
                </div>

                <div class="bg-slate-800/30 border-l-4 border-green-500 p-5 rounded-r-lg">
                    <h3 class="font-semibold text-white mb-2">2️⃣ 文件化流程</h3>
                    <p>撰寫團隊的分支策略、提交訊息規範、程式碼審查期望、PR 工作流程。不要假設所有人都知道規則——文件化提升一致性。</p>
                </div>

                <div class="bg-slate-800/30 border-l-4 border-purple-500 p-5 rounded-r-lg">
                    <h3 class="font-semibold text-white mb-2">3️⃣ 使用支援工具</h3>
                    <p>若採用 TBD,可考慮 <strong>TBD Flow</strong> 等命令列工具,協助自動化提交至 main、建立短期分支、強制 Conventional Commit 格式。</p>
                </div>

                <div class="bg-slate-800/30 border-l-4 border-amber-500 p-5 rounded-r-lg">
                    <h3 class="font-semibold text-white mb-2">4️⃣ 衡量效能</h3>
                    <p>追蹤 <strong>DORA Metrics</strong>：部署頻率、變更前置時間、服務恢復時間、變更失敗率。這些指標清楚顯示工作流程是否有效。</p>
                </div>

                <div class="bg-slate-800/30 border-l-4 border-red-500 p-5 rounded-r-lg">
                    <h3 class="font-semibold text-white mb-2">5️⃣ 持續迭代</h3>
                    <p>工作流程應隨團隊與產品成長而演化。不要因為「一直以來都這樣做」而固守過時流程——勇於調整。</p>
                </div>
            </div>
        </section>

        <!-- Conclusion -->
        <section>
            <h2 class="text-2xl font-bold text-white mb-4">🎯 結論與建議</h2>
            <p class="mb-4 text-lg"><strong>應追求的目標工作流程：Trunk-Based Development</strong>。但根據團隊成熟度、系統完備性、產品特性,其他流程（GitHub
                Flow、混合策略）仍有其合理性。</p>

            <div class="bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-700 rounded-lg p-6 my-6">
                <p class="text-xl font-semibold text-white mb-3">💡 核心建議：最佳化回饋速度</p>
                <p class="text-slate-200 mb-3">程式碼從開發者機器到生產環境越快,學習與改進的速度就越快。這通常意味著<strong>更簡單的工作流程</strong>,而非更複雜的流程。
                </p>
                <p class="text-slate-200">選擇適合團隊的流程、投資自動化測試、不要害怕隨成長而演進。</p>
            </div>

            <p class="text-center text-slate-400 italic mt-8">記住：工作流程是工具,不是目的。目的是讓團隊更快、更安全地交付價值給使用者。</p>
        </section>

    </main>

    <!-- Footer -->
    <footer class="mt-16 py-8 bg-slate-900 text-center text-slate-500 text-sm">
        <p>Generated by <a href="https://wellstsai.com" target="_blank"
                class="underline hover:text-slate-300">wellstsai.com</a></p>
        <p class="mt-1">撰寫日期：2026-02-02</p>
    </footer>

    <!-- KaTeX auto-render -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            renderMathInElement(document.body, {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "\\(", right: "\\)", display: false }
                ]
            });
        });

        // Animation control functions
        function restartAnimation(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            // Remove and re-add container to restart CSS animations
            const parent = container.parentElement;
            const clone = container.cloneNode(true);
            parent.replaceChild(clone, container);

            // Ensure it's not paused
            clone.classList.remove('paused');
        }

        function togglePause(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            container.classList.toggle('paused');

            // Update button text
            const buttons = container.parentElement.querySelectorAll('.control-btn');
            buttons.forEach(btn => {
                if (btn.textContent.includes('暫停') || btn.textContent.includes('繼續')) {
                    btn.textContent = container.classList.contains('paused') ? '▶️ 繼續' : '⏸️ 暫停';
                }
            });
        }

        // Auto-restart animations when they end (optional)
        document.addEventListener('DOMContentLoaded', function () {
            const animations = ['gitflow-animation', 'githubflow-animation', 'tbd-animation'];

            animations.forEach(id => {
                const container = document.getElementById(id);
                if (container) {
                    // Add hover to pause hint
                    container.addEventListener('mouseenter', function () {
                        if (!this.classList.contains('paused')) {
                            this.style.cursor = 'pointer';
                        }
                    });
                }
            });
        });
    </script>

</body>

</html>