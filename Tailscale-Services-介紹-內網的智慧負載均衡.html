<!doctypehtml><html lang="zh-Hant"><meta name="twitter:image"content="https://wellstsai.com/single-page-conclusion/Tailscale-Services-%E4%BB%8B%E7%B4%B9-%E5%85%A7%E7%B6%B2%E7%9A%84%E6%99%BA%E6%85%A7%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1.png"><meta name="twitter:description"content="Tailscale Services 將應用負載均衡與反向代理整合至 Tailnet。此功能提供智慧地理路由、自動故障轉移，並解決 Sidecar 與自簽憑證的部署難題。"><meta name="twitter:title"content="Tailscale Services 介紹：內網的智慧負載均衡"><meta name="twitter:card"content="summary_large_image"><meta property="og:type"content="article"><meta property="og:site_name"content="WellWells"><meta property="og:image"content="https://wellstsai.com/single-page-conclusion/Tailscale-Services-%E4%BB%8B%E7%B4%B9-%E5%85%A7%E7%B6%B2%E7%9A%84%E6%99%BA%E6%85%A7%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1.png"><meta property="og:url"content="https://wellstsai.com/single-page-conclusion/Tailscale-Services-%E4%BB%8B%E7%B4%B9-%E5%85%A7%E7%B6%B2%E7%9A%84%E6%99%BA%E6%85%A7%E8%B2%A0%E8%BC%89%E5%9D%87%E8%A1%A1.html"><meta property="og:description"content="Tailscale Services 將應用負載均衡與反向代理整合至 Tailnet。此功能提供智慧地理路由、自動故障轉移，並解決 Sidecar 與自簽憑證的部署難題。"><meta property="og:title"content="Tailscale Services 介紹：內網的智慧負載均衡"><meta name="description"content="Tailscale Services 將應用負載均衡與反向代理整合至 Tailnet。此功能提供智慧地理路由、自動故障轉移，並解決 Sidecar 與自簽憑證的部署難題。"><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1"><title>Tailscale 服務全解析：內網的智慧負載均衡</title><link rel="preconnect"href="https://fonts.googleapis.com"><link rel="preconnect"href="https://fonts.gstatic.com"crossorigin><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"rel="stylesheet"><script src="https://cdn.tailwindcss.com"></script><style>body{font-family:Poppins,sans-serif}.gradient-text{background-image:linear-gradient(to bottom,var(--tw-gradient-stops));-webkit-background-clip:text;background-clip:text;color:transparent}.keyword{border-bottom:2px dotted #0ea5e9;cursor:help;transition:all .2s ease-in-out}.keyword:hover{background-color:#0ea5e933;color:#e0f2fe}#tooltip{position:absolute;display:none;z-index:1000;pointer-events:none;transition:opacity .2s;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}</style><script async src="https://www.googletagmanager.com/gtag/js?id=G-JKC4KZLT26"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JKC4KZLT26")</script><body class="bg-gray-900 text-slate-300 selection:bg-sky-500 selection:text-white pb-16"><div id="tooltip"class="bg-gray-900/80 border border-sky-400/50 rounded-lg shadow-2xl p-4 text-sm"><h4 id="tooltip-title"class="font-bold text-sky-400 mb-1"></h4><p id="tooltip-desc"class="text-slate-200"><p id="tooltip-details"class="text-xs text-slate-400 mt-2 border-t border-gray-700 pt-2"></div><div class="container mx-auto px-4 py-12 md:py-20"><header class="text-center mb-12 md:mb-16"><h1 class="text-4xl md:text-6xl font-bold mb-4">🚀 <span class="gradient-text from-sky-400 to-purple-400">Tailscale Services</span> 登場</h1><p class="text-lg md:text-xl text-slate-400 max-w-3xl mx-auto">告別繁瑣設定，迎向內建於 <span class="keyword"data-keyword="tailnet">Tailnet</span> 的智慧型應用負載均衡。</header><section class="mb-16"><div class="max-w-4xl mx-auto bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg backdrop-blur-sm p-6 md:p-8 ring-1 ring-white/10"><h2 class="text-2xl font-semibold text-white mb-4">📝 核心摘要</h2><p class="text-base leading-relaxed">Tailscale Services 是一項新的 Beta 功能，它將<strong>傳統應用負載均衡 (ALB)</strong> 與<strong>反向代理</strong>的概念原生整合到您的 <span class="keyword"data-keyword="tailnet">Tailnet</span> 中。您現在可以將任何綁定到埠號 (port) 的內部資源，發布為一個統一的 Tailscale 服務。<p class="text-base leading-relaxed mt-3">系統會自動路由流量，並<strong>動態選擇延遲最低、地理位置最近</strong>的服務實例，實現高可用性 (HA) 與效能最佳化，同時完整享受 Tailscale 既有的安全網狀網路與 <span class="keyword"data-keyword="nat_traversal">NAT 穿透</span>技術。</div></section><main class="space-y-16"><section><h2 class="text-3xl font-bold text-center mb-8">💡 <span class="gradient-text from-sky-300 to-purple-300">核心概念：智慧路由</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center"><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6"><h3 class="text-xl font-semibold text-white mb-3">原生整合的 ALB</h3><p>您可以將 Tailscale Services 視為一個內建在 Tailscale 裡的 <span class="keyword"data-keyword="alb">ALB</span> 混合 <span class="keyword"data-keyword="reverse_proxy">反向代理</span>。它讓您不再需要為單一服務綁定單一節點名稱。</div><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6"><h3 class="text-xl font-semibold text-white mb-3">地理感知路由</h3><p>最關鍵的特色是，Tailscale 會<strong>自動偵測用戶的地理位置</strong>，並將流量導向至對用戶而言延遲最低的後端服務實例，無需手動設定。</div></div></section><section><h2 class="text-3xl font-bold text-center mb-8">🔧 <span class="gradient-text from-sky-300 to-purple-300">實戰 (一)：高可用性與故障轉移</span></h2><div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center"><div><p class="mb-4">假設您有一個服務 `app.velociraptor`，它同時運行在兩台機器上：<ul class="list-disc list-inside space-y-2 mb-6 bg-gray-800/50 p-4 rounded-lg border border-gray-700"><li><strong>app1:</strong> 位於本地機房（低延遲）<li><strong>app2:</strong> 位於 DigitalOcean 雲端（高延遲備援）</ul><p class="mb-4">當用戶（位於本地）訪問時，Tailscale 會自動選擇 `app1`。如果 `app1` 需要維護，您只需執行 `drain` 指令將其移出服務池：<pre class="bg-gray-900 border border-gray-700 rounded-md p-4 text-green-400 font-mono text-sm overflow-x-auto mb-4">tailscale serve drain svc:app</pre><p class="mb-4">Tailscale 會立即將所有新流量無縫切換到 `app2`。維護完成後，使用 `advertise` 指令即可將其重新加回服務池：<pre class="bg-gray-900 border border-gray-700 rounded-md p-4 text-green-400 font-mono text-sm overflow-x-auto mb-4">tailscale serve advertise svc:app</pre></div><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6 backdrop-blur-sm min-h-[300px] flex flex-col justify-center items-center"><div class="text-center"><span class="text-6xl mb-4">🔄</span><h3 class="text-xl font-semibold text-white mb-3">自動故障轉移</h3><p class="text-slate-300">用戶會自動被導向至最低延遲的 `app1`。<p class="text-slate-300 mt-2">當 `app1` 被 'drain' 時，流量會自動、無縫地轉向 `app2`。</div></div></div></section><section><h2 class="text-3xl font-bold text-center mb-8">⚙️ <span class="gradient-text from-sky-300 to-purple-300">實戰 (二)：Proxmox 與自簽憑證</span></h2><p class="text-center max-w-3xl mx-auto mb-8">許多內部服務（如 Proxmox）使用 <span class="keyword"data-keyword="tls_self_signed">自簽 TLS 憑證</span>，這在過去會導致連線失敗。Tailscale Services 現在可以優雅地處理這個問題。<div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6 backdrop-blur-sm space-y-4"><h3 class="text-xl font-semibold text-white mb-3">設定步驟</h3><p class="bg-red-900/50 border border-red-700 text-red-200 p-3 rounded-lg">⚠️ <strong>重要前提：</strong> 託管服務的節點<strong>必須使用 Tag</strong>（例如 `tag:proxmox`），不能由一般用戶擁有。<p><strong>1. (Admin UI) 建立服務：</strong><br>在 Tailscale 管理後台的 "Services" 頁面，新增一個服務（例如 `px2`），並指定對外埠號（例如 `443`）。<p><strong>2. (Node CLI) 執行 Serve 指令：</strong><br>在您的 Proxmox 節點上，執行以下指令，將本地的 `8006` 埠號對應到服務 `px2`：<pre class="bg-gray-900 border border-gray-700 rounded-md p-4 text-green-400 font-mono text-sm overflow-x-auto">tailscale serve service svc:px2 443 https://localhost:8006<strong class="text-yellow-400">+insecure</strong></pre><p class="text-sm text-slate-400">`+insecure` 旗標會告訴 Tailscale「我信任這個後端自簽憑證」。<p><strong>3. (Admin UI) 批准節點：</strong><br>回到管理後台，批准 Proxmox 節點加入 `px2` 服務。</div><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6 backdrop-blur-sm flex flex-col justify-center items-start"><h3 class="text-xl font-semibold text-white mb-4">🔒 連線流程</h3><p class="text-base leading-relaxed mb-3"><strong>結果：</strong> Tailscale 扮演了中間人的角色，完美解決了憑證信任問題。<ol class="list-decimal list-inside space-y-3"><li><span class="text-green-400 font-medium">[用戶 ➔ Tailscale]</span><br><span class="text-sm text-slate-300">用戶瀏覽器安全地連線到 `px2.ts.net`，此服務持有由 Tailscale 自動簽發的有效 <span class="keyword"data-keyword="lets_encrypt">Let's Encrypt</span> 憑證。</span><li><span class="text-yellow-400 font-medium">[Tailscale ➔ Proxmox]</span><br><span class="text-sm text-slate-300">Tailscale Services 接著代理此連線到內部的 `https://localhost:8006`。由於有 `+insecure` 旗標，它會安全地忽略 Proxmox 的<span class="keyword"data-keyword="tls_self_signed">自簽憑證</span>錯誤。</span></ol></div></div></section><section><h2 class="text-3xl font-bold text-center mb-8">📈 <span class="gradient-text from-sky-300 to-purple-300">關鍵優勢與社群反饋</span></h2><div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12"><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6 backdrop-blur-sm"><h3 class="text-xl font-semibold text-white mb-3">告別 Sidecar 煉獄</h3><p>在此之前，如果您在一台主機上運行 20 個容器，就需要 20 個 <span class="keyword"data-keyword="sidecar">Sidecar</span> 容器來為每個服務取得獨立的 Tailscale IP。<p class="mt-3 font-semibold text-green-400">現在，您可以在 <strong>1 台主機</strong>上，將 <strong>20 個容器</strong>分別發布為 <strong>20 個獨立的 Tailscale Services</strong>，無需任何額外的 Sidecar。</div><div class="bg-gray-800/60 border border-gray-700 rounded-xl shadow-lg p-6 backdrop-blur-sm"><h3 class="text-xl font-semibold text-white mb-3">Proxmox 叢集 HA</h3><p>社群反饋指出，將多個 Proxmox 節點加入同一個 Service 非常有用。<p class="mt-3 text-slate-300">即使叢集中的某台主機當機，用戶依然可以透過單一的 Service URL（例如 `proxmox.ts.net`）訪問到其他健康節點的 Web UI，確保管理控制台的<strong>高可用性</strong>。</div></div><section class="text-center max-w-3xl mx-auto"><h2 class="text-3xl font-bold mb-6">🏁 <span class="gradient-text from-sky-300 to-purple-300">結論</span></h2><p class="text-lg leading-relaxed text-slate-300 mb-6">Tailscale Services 大幅簡化了內部服務的發布、擴展與安全性。透過將負載均衡與地理路由原生整合，它解決了許多傳統 <span class="keyword"data-keyword="sidecar">Sidecar</span> 部署的痛點，並為處理 <span class="keyword"data-keyword="tls_self_signed">自簽憑證</span>等棘手問題提供了絕佳的解決方案。這項功能無疑是 Tailscale 生態系中極具威力的新成員。<div class="bg-sky-900/40 border border-sky-700/60 rounded-lg p-4 text-sky-200"><p class="font-medium">⚠️ 注意：此功能目前處於 Beta 階段<p class="text-sm mt-2">功能與指令可能仍會變動。如需最準確的資訊，請隨時參閱 <a href="https://tailscale.com/kb/1242/tailscale-serve"target="_blank"rel="noopener noreferrer"class="font-bold text-white underline hover:text-sky-300 transition-colors">Tailscale 官方 Serve 說明文件 </a>。</div></section></section></main></div><footer class="fixed bottom-0 left-0 right-0 z-50 bg-gray-900/90 backdrop-blur-sm p-3 text-center text-xs text-slate-400 border-t border-gray-700/50"><a href="https://wellstsai.com"target="_blank"rel="noopener noreferrer"class="hover:text-sky-400 transition-colors">Generated by wellstsai.com </a><span class="mx-2">|</span> <span>撰寫日期：2025-10-29</span></footer><script>document.addEventListener("DOMContentLoaded",()=>{const e={tailnet:{title:"Tailnet",desc:"您的私有 Tailscale 網路。",details:"一個 Tailnet 包含了您所有的設備（節點）、ACL 規則和網路設定，形成一個安全的點對點網狀網路。"},alb:{title:"ALB (Application Load Balancer)",desc:"應用程式負載均衡器。",details:"在OSI第七層（應用層）運作，能根據 HTTP 標頭、URL 路徑等資訊來轉發流量，功能比傳統的網路負載均衡器更強大。"},reverse_proxy:{title:"Reverse Proxy (反向代理)",desc:"隱藏後端伺服器的代理。",details:"客戶端只會連線到反向代理伺服器，由它來決定將請求轉發到哪一個內部伺服器，常用於負載均衡、安全防護和快取。"},nat_traversal:{title:"NAT Traversal (NAT 穿透)",desc:"一種繞過 NAT 限制的技術。",details:"Tailscale (基於 WireGuard) 使用 STUN、DERP 等技術，讓處於不同防火牆或 NAT 後方的設備能夠直接建立點對點連線。"},tls_self_signed:{title:"Self-Signed Certificate (自簽憑證)",desc:"未經公開 CA 認證的 TLS 憑證。",details:"這種憑證由伺服器自己產生，瀏覽器會警告為「不受信任」，適用於內部測試，但 Tailscale Services 預設會拒絕。"},sidecar:{title:"Sidecar Pattern (邊車模式)",desc:"一種雲原生設計模式。",details:"將應用程式的功能（如日誌、監控、代理）拆分到一個獨立的「邊車」容器中，它與主應用程式容器共享網路命名空間。"},tsidp:{title:"TSIDP (Tailscale Identity Provider)",desc:"Tailscale 內建的身份提供者。",details:"這是一項新功能，允許 Tailscale 作為 OIDC 身份提供者，用於驗證您 Tailnet 上的其他服務。"},proxy_protocol:{title:"Proxy Protocol",desc:"一種在代理和後端間傳遞客戶端資訊的協議。",details:"它允許反向代理（如 Tailscale Services）將原始客戶端的 IP 地址和埠號轉發給後端伺服器（如 Nginx Ingress）。"},lets_encrypt:{title:"Let's Encrypt",desc:"一個免費、自動化且開放的憑證頒發機構 (CA)。",details:"Tailscale 整合了 Let's Encrypt，可為您的 .ts.net 服務自動取得和續簽公開信任的 TLS 憑證。"}},t=document.getElementById("tooltip"),l=document.getElementById("tooltip-title"),i=document.getElementById("tooltip-desc"),s=document.getElementById("tooltip-details");function a(a){const d=a.target.dataset.keyword,n=e[d];n&&(l.textContent=n.title,i.textContent=n.desc,s.textContent=n.details,t.classList.add("max-w-[90vw]"),t.style.display="block",o(a.pageX,a.pageY))}function d(){t.style.display="none"}function n(e){o(e.pageX,e.pageY)}function o(e,l){if("block"!==t.style.display)return;const{clientWidth:i,clientHeight:s}=document.documentElement,{scrollY:a}=window,d=t.offsetWidth,n=t.offsetHeight,o=15;let c=e+o,r=l+o;c+d+o>i&&(c=e-d-o),c<o&&(c=o),r-a+n+o>s&&(r=l-n-o),r-a<o&&(r=a+o),t.style.left=`${c}px`,t.style.top=`${r}px`}document.querySelectorAll(".keyword").forEach(e=>{e.addEventListener("mouseenter",a),e.addEventListener("mouseleave",d),e.addEventListener("mousemove",n)})})</script>